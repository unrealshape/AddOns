local a,b=...local c=HeroCache;local d=b.Unit;local e=d.Player;local f=d.Target;local g=b.Spell;local h=b.Item;local i=math.max;local j=math.min;b.MainFrame=CreateFrame("Frame","HeroLib_MainFrame",UIParent)b.Timer={Pulse=0,PulseOffset=0,TTD=0}function b.Pulse()if GetTime(true)>b.Timer.Pulse then b.Timer.PulseOffset=0.120+(b.GUISettings.General.ReduceCPULoad and b.GUISettings.General.ReduceCPULoadOffset or 0)b.Timer.Pulse=GetTime()+b.Timer.PulseOffset;c.HasBeenReset=false;c.Reset()if GetTime()>b.Timer.TTD then b.Timer.TTD=GetTime()+b.TTD.Settings.Refresh;b.TTDRefresh()end end end;b.MainFrame:SetScript("OnUpdate",b.Pulse)