local a,b=...local c=HeroCache;local error=error;local GetItemInfo=GetItemInfo;local GetSpellInfo=GetSpellInfo;local setmetatable=setmetatable;local d=string.format;local e=table.insert;local function f()local f={}f.__index=f;setmetatable(f,{__call=function(self,...)local g={}setmetatable(g,self)g:New(...)return g end})return f end;do local h=f()b.Unit=h;function h:New(i,j)if type(i)~="string"then error("Invalid UnitID.")end;self.UnitID=i;self.UseCache=j or false;self:Init()end;local k={}b.UnitGUIDMap=k;function h:RemoveUnitGUIDMapEntry()if k[self.UnitGUID]and k[self.UnitGUID][self.UnitID]then k[self.UnitGUID][self.UnitID]=nil;if next(k[self.UnitGUID])==nil then k[self.UnitGUID]=nil end end end;function h:AddUnitGUIDMapEntry()if not self.UnitGUID or not self.UnitID then return end;if not k[self.UnitGUID]then k[self.UnitGUID]={}end;if not k[self.UnitGUID][self.UnitID]then k[self.UnitGUID][self.UnitID]=self end end;function h:Init()self:RemoveUnitGUIDMapEntry()self.UnitExists=false;self.UnitGUID=nil;self.UnitNPCID=nil;self.UnitName=nil;self.UnitCanBeAttacked=false end;h.Player=h("player",true)h.Pet=h("pet")h.Target=h("target",true)h.Focus=h("focus",true)h.MouseOver=h("mouseover")h.Vehicle=h("vehicle")local l={{"Arena",5,true},{"Boss",4,true},{"Nameplate",b.MAXIMUM,true},{"Party",5,true},{"Raid",40,true}}for m,i in pairs(l)do local n=i[1]local o=i[2]local p=i[3]h[n]={}for q=1,o do local r=d("%s%d",n,q)h[n][r:lower()]=h(r,p)end end end;do local s=f()b.Spell=s;function s:New(t,u,v)if type(t)~="number"then error("Invalid SpellID.")end;if u and type(u)~="string"then error("Invalid Spell Type.")end;local w,m,m,m,x,y=GetSpellInfo(t)self.SpellID=t;self.SpellType=u or"Player"self.SpellName=w;self.ReturnID=v or 0;self.MinimumRange=x;self.MaximumRange=y;self.IsMelee=x==0 and y==0;self.LastCastTime=0;self.LastDisplayTime=0;self.LastHitTime=0;self.LastAppliedOnPlayerTime=0;self.LastRemovedFromPlayerTime=0 end end;do local z=f()b.MultiSpell=z;function z:New(...)local A={...}self.SpellTable={}for m,s in pairs(A)do if type(s)=="number"then s=b.Spell(s)end;if type(s.SpellID)~="number"then error("Invalid SpellID.")end;e(self.SpellTable,s)end;function z:Update()for q,s in pairs(self.SpellTable)do if s:IsLearned()or q==#self.SpellTable then s.Update=self.Update;setmetatable(self,{__index=s})break end end end;self:AddToMultiSpells()self:Update()end end;do local B={[""]=nil,["INVTYPE_AMMO"]={0},["INVTYPE_HEAD"]={1},["INVTYPE_NECK"]={2},["INVTYPE_SHOULDER"]={3},["INVTYPE_BODY"]={4},["INVTYPE_CHEST"]={5},["INVTYPE_ROBE"]={5},["INVTYPE_WAIST"]={6},["INVTYPE_LEGS"]={7},["INVTYPE_FEET"]={8},["INVTYPE_WRIST"]={9},["INVTYPE_HAND"]={10},["INVTYPE_FINGER"]={11,12},["INVTYPE_TRINKET"]={13,14},["INVTYPE_CLOAK"]={15},["INVTYPE_WEAPON"]={16,17},["INVTYPE_SHIELD"]={17},["INVTYPE_2HWEAPON"]={16},["INVTYPE_WEAPONMAINHAND"]={16},["INVTYPE_WEAPONOFFHAND"]={17},["INVTYPE_HOLDABLE"]={17},["INVTYPE_RANGED"]={18},["INVTYPE_THROWN"]={18},["INVTYPE_RANGEDRIGHT"]={18},["INVTYPE_RELIC"]={18},["INVTYPE_TABARD"]={19},["INVTYPE_BAG"]={20,21,22,23},["INVTYPE_QUIVER"]={20,21,22,23}}local C=f()b.Item=C;function C:New(D,E)if type(D)~="number"then error("Invalid ItemID.")end;if E and type(E)~="table"then error("Invalid ItemSlotIDs.")end;local F,m,G,H,I,m,m,m,J=GetItemInfo(D)self.ItemID=D;self.ItemName=F;self.ItemRarity=G;self.ItemLevel=H;self.ItemMinLevel=I;self.ItemSlotIDs=E or B[J]self.LastCastTime=0;self.LastDisplayTime=0;self.LastHitTime=0 end end