local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Utils;local g=d.Unit;local h=g.Player;local i=g.Target;local j=g.Pet;local k=d.Spell;local l=d.MultiSpell;local m=d.Item;local n=HeroRotation;local o=n.AoEON;local p=n.CDsON;local q=n.Cast;local r=n.CastAnnotated;local s=n.Commons.Everyone.num;local t=n.Commons.Everyone.bool;local pairs=pairs;local u=k.Monk.Windwalker;local v=m.Monk.Windwalker;local w={}local x;local y;local z;local A=11111;local B=11111;local C;local D=false;local E=false;local F=false;local G=false;local H=false;local I=false;local J=false;local K=u.Serenity:IsAvailable()and 1 or 2;local L=h:IsInDungeonArea()local M=(v.NeltharionsCalltoDominance:IsEquipped()or v.AshesoftheEmbersoul:IsEquipped()or v.MirrorofFracturedTomorrows:IsEquipped()or v.WitherbarksBranch:IsEquipped())and not L;local N={{u.LegSweep,"Cast Leg Sweep (Stun)",function()return true end},{u.RingOfPeace,"Cast Ring Of Peace (Stun)",function()return true end},{u.Paralysis,"Cast Paralysis (Stun)",function()return true end}}local O=HeroRotationCharDB.Toggles[4]local P=HeroRotationCharDB.Toggles[5]local Q=not HeroRotationCharDB.Toggles[15]local R=HeroRotationCharDB.Toggles[31]local S=HeroRotationCharDB.Toggles[32]local T=HeroRotationCharDB.Toggles[33]local U=HeroRotationCharDB.Toggles[34]local V=HeroRotationCharDB.Toggles[35]local W=HeroRotationCharDB.Toggles[36]local X=HeroRotationCharDB.Toggles[37]local Y=HeroRotationCharDB.Toggles[38]local Z=HeroRotationCharDB.Toggles[39]local _=HeroRotationCharDB.Toggles[12]local a0=0;local a1=0;local a2;local a3=0;local a4=GetInventoryItemID("player",13)local a5=GetInventoryItemID("player",14)local a6=false;local a7=0;local function s(a8)if a8 then return 1 else return 0 end end;local function t(a8)return a8~=0 end;local a9=h:GetEquipment()local aa=a9[13]and m(a9[13])or m(0)local ab=a9[14]and m(a9[14])or m(0)local ac=n.Commons.Everyone;local ad=n.Commons.Monk;local ae={General=n.GUISettings.General,Commons=n.GUISettings.APL.Monk.Commons,Windwalker=n.GUISettings.APL.Monk.Windwalker}d:RegisterForEvent(function()a7=0;A=11111;B=11111 end,"PLAYER_REGEN_ENABLED")d:RegisterForEvent(function()K=u.Serenity:IsAvailable()and 1 or 2 end,"SPELLS_CHANGED","LEARNED_SPELL_IN_TAB")d:RegisterForEvent(function()a9=h:GetEquipment()aa=a9[13]and m(a9[13])or m(0)ab=a9[14]and m(a9[14])or m(0)L=h:IsInDungeonArea()M=(v.NeltharionsCalltoDominance:IsEquipped()or v.AshesoftheEmbersoul:IsEquipped()or v.MirrorofFracturedTomorrows:IsEquipped()or v.WitherbarksBranch:IsEquipped())and not L end,"PLAYER_EQUIPMENT_CHANGED")d:RegisterForEvent(function()L=h:IsInDungeonArea()M=(v.NeltharionsCalltoDominance:IsEquipped()or v.AshesoftheEmbersoul:IsEquipped()or v.MirrorofFracturedTomorrows:IsEquipped()or v.WitherbarksBranch:IsEquipped())and not L end,"ZONE_CHANGED_NEW_AREA")local function af()return math.floor(h:EnergyTimeToMaxPredicted()*10+0.5)/10 end;local function ag()return math.floor(h:EnergyPredicted()+0.5)end;local function ah(ai)return not h:PrevGCD(1,ai)end;local function aj()if not u.MarkoftheCrane:IsAvailable()then return 0 end;local ak=0;for al,am in pairs(y)do if am:DebuffUp(u.MarkoftheCraneDebuff)then ak=ak+1 end end;return ak end;local function an(ao)if ao:IsInMeleeRange(10)and ao:GUID()==g("mouseover"):GUID()then a0=1107428;return true elseif ao:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and ao:GUID()~=i:GUID()and not _ and not string.find(ao:GUID(),174773)then a0=999;return true elseif ao:IsInMeleeRange(10)and ao:GUID()==i:GUID()then a1=107428;return true elseif ao:IsInMeleeRange(10)and not string.find(ao:GUID(),174773)then return true325216 end end;local function ap()if not u.MarkoftheCrane:IsAvailable()then return 0 end;local ak=aj()local aq=1;local ar=0.18;if ak>0 then aq=aq*(1+ak*ar)end;aq=aq*(1+0.1*u.CraneVortex:TalentRank())aq=aq*(1+0.3*s(h:BuffUp(u.KicksofFlowingMomentumBuff)))aq=aq*(1+0.05*u.FastFeet:TalentRank())return aq end;local function as()if not u.MarkoftheCrane:IsAvailable()then return true end;local ak=aj()if z==ak or ak>=5 then return true end;return false end;local function at()if not(u.TouchofDeath:CooldownUp()or h:BuffUp(u.HiddenMastersForbiddenTouchBuff))then return nil end;local au,av=nil,nil;for al,am in pairs(x)do if not am:IsFacingBlacklisted()and not am:IsUserCycleBlacklisted()and(am:AffectingCombat()or am:IsDummy())and(u.ImpTouchofDeath:IsAvailable()and am:HealthPercentage()<=15 or am:Health()<h:Health())and(not av or f.CompareThis("max",am:Health(),av))then au,av=am,am:Health()end end;if au and au==i then if not u.TouchofDeath:IsReady()then return nil end end;return au end;local function aw()local au,av=nil,nil;for al,am in pairs(y)do if not am:IsFacingBlacklisted()and not am:IsUserCycleBlacklisted()and(am:AffectingCombat()or am:IsDummy())and(not av or f.CompareThis("max",am:TimeToDie(),av))then au,av=am,am:TimeToDie()end end;return au end;local function ax(ao)if ao:IsInMeleeRange(10)and ao:GUID()==g("mouseover"):GUID()then a0=1100784;return true elseif ao:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and ao:GUID()~=i:GUID()and not _ then a0=999;return true elseif ao:IsInMeleeRange(10)and ao:GUID()==i:GUID()then a1=100784;return true elseif ao:IsInMeleeRange(10)then return true end end;local function ay(ao)if ao:IsInMeleeRange(10)and ao:GUID()==g("mouseover"):GUID()then a0=1100780;return true elseif ao:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and ao:GUID()~=i:GUID()and not _ and not string.find(ao:GUID(),174773)then a0=999;return true elseif ao:IsInMeleeRange(10)and ao:GUID()==i:GUID()then a1=100780;return true elseif ao:IsInMeleeRange(10)and not string.find(ao:GUID(),174773)then return true end end;local function az(ao)return ao:DebuffRemains(u.MarkoftheCraneDebuff)end;local function aA(ao)return ao:DebuffRemains(u.MarkoftheCraneDebuff)+s(ao:DebuffUp(u.SkyreachExhaustionDebuff))*20 end;local function aB(ao)return ao:DebuffRemains(u.MarkoftheCraneDebuff)+s(i:DebuffDown(u.SkyreachExhaustionDebuff))*20 end;local function aC(ao)return ao:DebuffRemains(u.MarkoftheCraneDebuff)-s(as())*(ao:TimeToDie()+ao:DebuffRemains(u.SkyreachCritDebuff)*20)end;local function aD(ao)return ao:DebuffRemains(u.JadefireBrandDebuff)end;local function aE(ao)return ao:TimeToDie()end;local function aF(ao)return ao:DebuffRemains(u.SkyreachCritDebuff)end;local function aG(ao)return ao:DebuffRemains(u.JadefireBrandDebuff)end;local function aH(ao)return h:BuffUp(u.PressurePointBuff)or ao:DebuffRemains(u.SkyreachExhaustionDebuff)>55 end;local function aI(ao)return h:BuffUp(u.KicksofFlowingMomentumBuff)or h:BuffUp(u.PressurePointBuff)or ao:DebuffRemains(u.SkyreachExhaustionDebuff)>55 end;local function aJ(ao)return ao:DebuffRemains(u.SkyreachExhaustionDebuff)>h:BuffRemains(u.CalltoDominanceBuff)end;local function aK(ao)return ao:DebuffRemains(u.SkyreachExhaustionDebuff)>55 end;local function aL()if u.SummonWhiteTigerStatue:IsCastable()and p()then if q(u.SummonWhiteTigerStatue,nil,nil,not i:IsInRange(40))then a1=388686;return"summon_white_tiger_statue precombat 2"end end;if u.ExpelHarm:IsReady()and h:Chi()<h:ChiMax()then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm precombat 4"end end;if u.ChiBurst:IsReady()and not u.JadefireStomp:IsAvailable()then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst precombat 6"end end;if u.ChiWave:IsReady()then if q(u.ChiWave,nil,nil,not i:IsInRange(40))then a1=115098;return"chi_wave precombat 8"end end end;local function aM(aN,aO)if aN:IsEquippedAndReady()and aO then if n.Cast(aN,nil,nil)then if aN:ID()==a4 then a1=24;return aN:Name().." top"elseif aN:ID()==a5 then a1=35;return aN:Name().." bop"end end end end;local function aP()if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BotTrinket then aM(v.ManicGrieftorch,true)end;if K==1 then if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BotTrinket then aM(v.AlgetharPuzzleBox,(C or not u.InvokeXuenTheWhiteTiger:IsAvailable())and h:BuffDown(u.SerenityBuff)or B<25)aM(v.EruptingSpearFragment,h:BuffUp(u.SerenityBuff))aM(v.ManicGrieftorch,h:BuffDown(u.SerenityBuff)and not C or(aa:HasUseBuff()or ab:HasUseBuff())and u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 and u.Serenity:CooldownDown()or B<5)aM(v.BeacontotheBeyond,h:BuffDown(u.SerenityBuff)and not C or u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 and u.Serenity:CooldownDown()or B<10)end;if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BotTrinket then aM(v.DragonfireBombDispenser,u.InvokeXuenTheWhiteTiger:CooldownRemains()>10 and u.Serenity:CooldownDown()or B<10)n.Print("TEST!")n.Print("buff",p()and((C or not u.InvokeXuenTheWhiteTiger:IsAvailable())and h:BuffUp(u.SerenityBuff)or B<25))local aQ=h:GetUseableTrinkets(w)aQ=h:GetUseableTrinkets(w)if aQ and(p()and((C or not u.InvokeXuenTheWhiteTiger:IsAvailable())and h:BuffUp(u.SerenityBuff)or B<25))then if aQ then if n.Cast(aQ,nil,nil)then if aQ:ID()==GetInventoryItemID("player",13)and ae.Commons.Enabled.TopTrinket then a1=24;return"Generic use_items for "..aQ:Name()elseif aQ:ID()==GetInventoryItemID("player",14)and ae.Commons.Enabled.BottomTrinket then a1=35;return"Generic use_items for "..aQ:Name()end end end end;local aQ=h:GetUseableTrinkets(w)aQ=h:GetUseableTrinkets(w)if aQ and(p()and u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 and u.Serenity:CooldownDown())then if aQ then if n.Cast(aQ,nil,nil)then if aQ:ID()==GetInventoryItemID("player",13)and ae.Commons.Enabled.TopTrinket then a1=24;return"Generic use_items for "..aQ:Name()elseif aQ:ID()==GetInventoryItemID("player",14)and ae.Commons.Enabled.BottomTrinket then a1=35;return"Generic use_items for "..aQ:Name()end end end end end else if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BotTrinket then aM(v.AlgetharPuzzleBox,(C or not u.InvokeXuenTheWhiteTiger:IsAvailable())and h:BuffDown(u.StormEarthAndFireBuff)or B<25)aM(v.EruptingSpearFragment,h:BuffUp(u.InvokersDelightBuff))aM(v.ManicGrieftorch,not C or(aa:HasUseBuff()or ab:HasUseBuff())and u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or B<5)aM(v.BeacontotheBeyond,h:BuffDown(u.StormEarthAndFireBuff)and not C or u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or B<10)end;if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BotTrinket then aM(v.DragonfireBombDispenser,u.InvokeXuenTheWhiteTiger:CooldownRemains()>10 and u.Serenity:CooldownDown()or B<10)local aQ=h:GetUseableTrinkets(w)aQ=h:GetUseableTrinkets(w)n.Print("TEST!")if aQ and(p()and((C or not u.InvokeXuenTheWhiteTiger:IsAvailable())and h:BuffUp(u.StormEarthAndFireBuff)or B<25))then if aQ then if n.Cast(aQ,nil,nil)then if aQ:ID()==GetInventoryItemID("player",13)and ae.Commons.Enabled.TopTrinket then a1=24;return"Generic use_items for "..aQ:Name()elseif aQ:ID()==GetInventoryItemID("player",14)and ae.Commons.Enabled.BottomTrinket then a1=35;return"Generic use_items for "..aQ:Name()end end end end;local aQ=h:GetUseableTrinkets(w)aQ=h:GetUseableTrinkets(w)if aQ and(p()and u.InvokeXuenTheWhiteTiger:CooldownRemains()>30)then if aQ then if n.Cast(aQ,nil,nil)then if aQ:ID()==GetInventoryItemID("player",13)and ae.Commons.Enabled.TopTrinket then a1=24;return"Generic use_items for "..aQ:Name()elseif aQ:ID()==GetInventoryItemID("player",14)and ae.Commons.Enabled.BottomTrinket then a1=35;return"Generic use_items for "..aQ:Name()end end end end end end end;local function aR()local aQ=h:GetUseableTrinkets(w)aQ=h:GetUseableTrinkets(w)if aQ then if n.Cast(aQ,nil,nil)then if aQ:ID()==GetInventoryItemID("player",13)and ae.Commons.Enabled.TopTrinket then a1=24;return"Generic use_items for "..aQ:Name()elseif aQ:ID()==GetInventoryItemID("player",14)and ae.Commons.Enabled.BottomTrinket then a1=35;return"Generic use_items for "..aQ:Name()end end end end;local function aS()if u.SummonWhiteTigerStatue:IsCastable()and p()then if q(u.SummonWhiteTigerStatue,nil,nil,not i:IsInRange(40))then a1=388686;return"summon_white_tiger_statue opener 2"end end;if u.ExpelHarm:IsReady()and(u.ChiBurst:IsAvailable()and h:ChiDeficit()>=3)then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm opener 4"end end;if u.JadefireStomp:IsCastable()and(i:DebuffRemains(u.JadefireBrandDebuff)<2 and i:DebuffDown(u.SkyreachExhaustionDebuff))then if q(u.JadefireStomp,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm opener 6"end end;if u.ExpelHarm:IsReady()and(u.ChiBurst:IsAvailable()and h:Chi()==3)then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm opener 8"end end;if u.ChiWave:IsReady()and h:ChiDeficit()>=2 then if q(u.ChiWave,nil,nil,not i:IsInRange(40))then a1=115098;return"chi_wave opener 10"end end;if u.ExpelHarm:IsReady()then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm opener 12"end end;if u.ChiBurst:IsReady()and(h:Chi()>1 and h:ChiDeficit()>=2)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst opener 14"end end end;local function aT()if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and z>3)then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord bdb_setup 2"end end;if u.BonedustBrew:IsCastable()and(as()and h:Chi()>=4)then if q(u.BonedustBrew,nil,nil,not i:IsInRange(40))then a1=386276;return"bonedust_brew bdb_setup 4"end end;if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and h:ChiDeficit()>=2 and h:BuffUp(u.StormEarthAndFireBuff))then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm bdb_setup 6"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and not u.WhirlingDragonPunch:IsAvailable()and not as())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick bdb_setup 8"end end;if u.RisingSunKick:IsReady()and(ah(u.RisingSunKick)and h:Chi()>=5 and u.WhirlingDragonPunch:IsAvailable())then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick bdb_setup 10"end end;if u.RisingSunKick:IsReady()and(ah(u.RisingSunKick)and z>=2 and u.WhirlingDragonPunch:IsAvailable())then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick bdb_setup 12"end end end;local function aU()if u.InvokeXuenTheWhiteTiger:IsCastable()and(not E and i:TimeToDie()>25 and u.BonedustBrew:IsAvailable()and u.BonedustBrew:CooldownRemains()<=5 and(z<3 and h:Chi()>=3 or z>=3 and h:Chi()>=2)or B<25)then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_sef 4"end end;if u.InvokeXuenTheWhiteTiger:IsCastable()and(i:TimeToDie()>25 and B>120 and(aa:ID()~=v.AshesoftheEmbersoul:ID()and aa:ID()~=v.WitherbarksBranch:ID()and ab:ID()~=v.AshesoftheEmbersoul:ID()and ab:ID()~=v.WitherbarksBranch:ID()or(aa:ID()==v.AshesoftheEmbersoul:ID()or aa:ID()==v.WitherbarksBranch:ID())and not(aa:CooldownRemains()>0)or(ab:ID()==v.AshesoftheEmbersoul:ID()or ab:ID()==v.WitherbarksBranch:ID())and not(ab:CooldownRemains()>0)))then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_sef 6"end end;if u.InvokeXuenTheWhiteTiger:IsCastable()and(B<60 and(i:DebuffRemains(u.SkyreachExhaustionDebuff)<2 or i:DebuffRemains(u.SkyreachExhaustionDebuff)>55)and z<3)then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_sef 7"end end;if u.StormEarthAndFire:IsCastable()and(u.BonedustBrew:IsAvailable()and(B<30 and u.BonedustBrew:CooldownRemains()<4 and h:Chi()>=4 or h:BuffUp(u.BonedustBrewBuff)or not as()and z>=3 and u.BonedustBrew:CooldownRemains()<=2 and h:Chi()>=2)and(C or u.InvokeXuenTheWhiteTiger:CooldownRemains()>u.StormEarthAndFire:FullRechargeTime()))then if q(u.StormEarthAndFire,nil)then a1=137639;return"storm_earth_and_fire cd_sef 8"end end;if u.StormEarthAndFire:IsCastable()and(not u.BonedustBrew:IsAvailable()and(C or i:TimeToDie()>15 and u.StormEarthAndFire:FullRechargeTime()<u.InvokeXuenTheWhiteTiger:CooldownRemains()))then if q(u.StormEarthAndFire,nil)then a1=137639;return"storm_earth_and_fire cd_sef 10"end end;if u.BonedustBrew:IsCastable()and(h:BuffDown(u.BonedustBrewBuff)and h:BuffUp(u.StormEarthAndFireBuff)and h:BuffRemains(u.StormEarthAndFireBuff)<11 and as()or h:BuffDown(u.BonedustBrewBuff)and B<30 and B>10 and as()and h:Chi()>=4 or B<10 or i:DebuffDown(u.SkyreachExhaustionDebuff)and z>=4 and ap()>=2 or C and as()and z>=4)then if q(u.BonedustBrew,nil,nil,not i:IsInRange(40))then a1=386276;return"bonedust_brew cd_sef 12"end end;if h:BuffDown(u.BonedustBrewBuff)and u.BonedustBrew:IsAvailable()and u.BonedustBrew:CooldownRemains()<=2 and(B>60 and(u.StormEarthAndFire:Charges()>0 or u.StormEarthAndFire:CooldownRemains()>10)and(C or u.InvokeXuenTheWhiteTiger:CooldownRemains()>10 or E)or(C or u.InvokeXuenTheWhiteTiger:CooldownRemains()>13)and(u.StormEarthAndFire:Charges()>0 or u.StormEarthAndFire:CooldownRemains()>13 or h:BuffUp(u.StormEarthAndFireBuff)))then local ShouldReturn=aT()if ShouldReturn then return ShouldReturn end end;if u.StormEarthAndFire:IsCastable()and(B<20 or u.StormEarthAndFire:Charges()==2 and u.InvokeXuenTheWhiteTiger:CooldownRemains()>u.StormEarthAndFire:FullRechargeTime()and u.FistsofFury:CooldownRemains()<=9 and h:Chi()>=2 and u.WhirlingDragonPunch:CooldownRemains()<=12)then if q(u.StormEarthAndFire,nil)then a1=137639;return"storm_earth_and_fire cd_sef 14"end end;if u.TouchofDeath:CooldownUp()then local aV=nil;if o()then aV=at()else if u.TouchofDeath:IsReady()then aV=i end end;if aV then if L and h:BuffDown(u.SerenityBuff)and ah(u.TouchofDeath)and aV:Health()<h:Health()or h:BuffRemains(u.HiddenMastersForbiddenTouchBuff)<2 or h:BuffRemains(u.HiddenMastersForbiddenTouchBuff)>aV:TimeToDie()then if aV:GUID()==i:GUID()then if q(u.TouchofDeath,ae.Windwalker.GCDasOffGCD.TouchOfDeath,nil,not i:IsInMeleeRange(5))then a1=322109;return"touch_of_death cd_sef main-target 16"end end end end;if aV and ah(u.TouchofDeath)then if L then if aV:TimeToDie()>60 or aV:DebuffUp(u.BonedustBrewDebuff)or B<10 then if aV:GUID()==i:GUID()then if q(u.TouchofDeath,ae.Windwalker.GCDasOffGCD.TouchOfDeath,nil,not i:IsInMeleeRange(5))then a1=322109;return"touch_of_death cd_sef main-target 18"end end end else if aV:GUID()==i:GUID()then if q(u.TouchofDeath,ae.Windwalker.GCDasOffGCD.TouchOfDeath,nil,not i:IsInMeleeRange(5))then a1=322109;return"touch_of_death cd_sef main-target 20"end end end end end;if u.TouchofKarma:IsCastable()and not ae.Windwalker.IgnoreToK and(u.InvokeXuenTheWhiteTiger:IsAvailable()and(B>90 or C or E or B<16)or not u.InvokeXuenTheWhiteTiger:IsAvailable()and(B>159 or E))then if q(u.TouchofKarma,nil,nil,not i:IsInRange(20))then a1=122470;return"touch_of_karma cd_sef 22"end end;if u.AncestralCall:IsCastable()and(u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or E or B<20)then if q(u.AncestralCall,nil)then a1=274738;return"ancestral_call cd_sef 24"end end;if u.BloodFury:IsCastable()and(u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or E or B<20)then if q(u.BloodFury,nil)then a1=20572;return"blood_fury cd_sef 26"end end;if u.Fireblood:IsCastable()and(u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or E or B<10)then if q(u.Fireblood,nil)then a1=265221;return"fireblood cd_sef 28"end end;if u.Berserking:IsCastable()and(u.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or E or B<15)then if q(u.Berserking,nil)then a1=26297;return"berserking cd_sef 30"end end;if u.BagofTricks:IsCastable()and h:BuffDown(u.StormEarthAndFireBuff)then if q(u.BagofTricks,nil)then a1=312411;return"bag_of_tricks cd_sef 32"end end;if u.LightsJudgment:IsCastable()then if q(u.LightsJudgment,nil)then a1=255647;return"lights_judgment cd_sef 34"end end end;local function aW()if u.InvokeXuenTheWhiteTiger:IsCastable()and(i:TimeToDie()>16 and not E and u.BonedustBrew:IsAvailable()and u.BonedustBrew:CooldownRemains()<=1 or h:BloodlustUp()or B<25)then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_serenity 2"end end;if u.InvokeXuenTheWhiteTiger:IsCastable()and((i:TimeToDie()>16 or L and u.Serenity:CooldownRemains()<2)and B>120 and(aa:ID()~=v.AshesoftheEmbersoul:ID()and aa:ID()~=v.WitherbarksBranch:ID()and ab:ID()~=v.AshesoftheEmbersoul:ID()and ab:ID()~=v.WitherbarksBranch:ID()or(aa:ID()==v.AshesoftheEmbersoul:ID()or aa:ID()==v.WitherbarksBranch:ID())and not(aa:CooldownRemains()>0)or(ab:ID()==v.AshesoftheEmbersoul:ID()or ab:ID()==v.WitherbarksBranch:ID())and not(ab:CooldownRemains()>0)))then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_serenity 4"end end;if u.InvokeXuenTheWhiteTiger:IsCastable()and(i:TimeToDie()>16 and B<60 and(i:DebuffRemains(u.SkyreachExhaustionDebuff)<2 or i:DebuffRemains(u.SkyreachExhaustionDebuff)>55)and u.Serenity:CooldownUp()and z<3)then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_serenity 6"end end;if u.InvokeXuenTheWhiteTiger:IsCastable()and(L and u.BonedustBrew:IsAvailable()and i:TimeToDie()>16 and u.Serenity:CooldownUp()and u.BonedustBrew:CooldownRemains()<2)then if q(u.InvokeXuenTheWhiteTiger,nil,nil,not i:IsInRange(40))then a1=123904;return"invoke_xuen_the_white_tiger cd_serenity 8"end end;if u.BonedustBrew:IsCastable()and(h:BuffUp(u.InvokersDelightBuff)or h:BuffDown(u.BonedustBrewBuff)and u.InvokeXuenTheWhiteTiger:CooldownDown()and not C or u.Serenity:CooldownRemains()>15 or B<30 and B>10 or B<10)then if q(u.BonedustBrew,nil,nil,not i:IsInRange(40))then a1=386276;return"bonedust_brew cd_serenity 10"end end;if u.Serenity:IsCastable()and(M and(h:BuffUp(u.InvokersDelightBuff)or E and(u.DrinkingHornCover:IsAvailable()and B>110 or not u.DrinkingHornCover:IsAvailable()and B>105))or not u.InvokeXuenTheWhiteTiger:IsAvailable()or B<15)then if q(u.Serenity,nil)then a1=152173;return"serenity cd_serenity 12"end end;if u.Serenity:IsCastable()and(not M and(h:BuffUp(u.InvokersDelightBuff)or u.InvokeXuenTheWhiteTiger:CooldownRemains()>B or B>u.InvokeXuenTheWhiteTiger:CooldownRemains()+10 and B>90))then if q(u.Serenity,nil)then a1=152173;return"serenity cd_serenity 14"end end;if u.TouchofDeath:CooldownUp()then local aV=nil;if o()then aV=at()else if u.TouchofDeath:IsReady()then aV=i end end;if aV then if L and h:BuffDown(u.SerenityBuff)and ah(u.TouchofDeath)and aV:Health()<h:Health()or h:BuffRemains(u.HiddenMastersForbiddenTouchBuff)<2 or h:BuffRemains(u.HiddenMastersForbiddenTouchBuff)>aV:TimeToDie()then if aV:GUID()==i:GUID()then if q(u.TouchofDeath,ae.Windwalker.GCDasOffGCD.TouchOfDeath,nil,not i:IsInMeleeRange(5))then a1=322109;return"touch_of_death cd_sef main-target 16"end else if n.CastLeftNameplate(aV,u.TouchofDeath)then a1=322109;return"touch_of_death cd_sef off-target 16"end end end end;if aV and ah(u.TouchofDeath)then if L then if(aV:TimeToDie()>60 or aV:DebuffUp(u.BonedustBrewDebuff)or B<10)and h:BuffDown(u.SerenityBuff)then if aV:GUID()==i:GUID()then if q(u.TouchofDeath,ae.Windwalker.GCDasOffGCD.TouchOfDeath,nil,not i:IsInMeleeRange(5))then a1=322109;return"touch_of_death cd_sef main-target 18"end else if n.CastLeftNameplate(aV,u.TouchofDeath)then a1=322109;return"touch_of_death cd_sef off-target 18"end end end else if h:BuffDown(u.SerenityBuff)then if aV:GUID()==i:GUID()then if q(u.TouchofDeath,ae.Windwalker.GCDasOffGCD.TouchOfDeath,nil,not i:IsInMeleeRange(5))then a1=322109;return"touch_of_death cd_sef main-target 20"end else if n.CastLeftNameplate(aV,u.TouchofDeath)then a1=322109;return"touch_of_death cd_sef off-target 20"end end end end end end;if not ae.Windwalker.IgnoreToK and u.TouchofKarma:IsCastable()and(B>90 or B<10)then if q(u.TouchofKarma,nil)then a1=122470;return"touch_of_karma cd_serenity 22"end end;if h:BuffUp(u.SerenityBuff)or B<20 then if u.AncestralCall:IsCastable()then if q(u.AncestralCall,nil)then a1=274738;return"ancestral_call cd_serenity 24"end end;if u.BloodFury:IsCastable()then if q(u.BloodFury,nil)then a1=20572;return"blood_fury cd_serenity 26"end end;if u.Fireblood:IsCastable()then if q(u.Fireblood,nil)then a1=265221;return"fireblood cd_serenity 28"end end;if u.Berserking:IsCastable()then if q(u.Berserking,nil)then a1=26297;return"berserking cd_serenity 30"end end;if u.BagofTricks:IsCastable()then if q(u.BagofTricks,nil)then a1=312411;return"bag_of_tricks cd_serenity 32"end end end;if u.LightsJudgment:IsCastable()then if q(u.LightsJudgment,nil)then a1=255647;return"lights_judgment cd_serenity 34"end end end;local function aX()if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<1 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_aoelust 2"end end;if u.StrikeoftheWindlord:IsReady()and(h:HasTier(31,4)and u.Thunderfist:IsAvailable())then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_aoelust 4"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 6"end end;if h:IsChanneling(u.FistsofFury)and h:BuffStack(u.ChiEnergyBuff)==30 then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_aoelust 8"end end;if u.FistsofFury:IsReady()and u.JadeIgnition:IsAvailable()then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoelust 10"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2)and h:BuffUp(u.BonedustBrewBuff)and z>4)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 12"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 14"end end;if u.FistsofFury:IsReady()and(h:BuffUp(u.InvokersDelightBuff)and h:HasTier(31,2)and(z>5 and h:BuffStack(u.TransferthePowerBuff)>5 or z>6 or z>4 and not u.CraneVortex:IsAvailable()and h:BuffStack(u.TransferthePowerBuff)>5))then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoelust 16"end end;if u.FistsofFury:IsReady()and(not h:HasTier(30,2)and h:BuffDown(u.InvokersDelightBuff)and h:HasTier(31,2)and(h:BuffDown(u.BonedustBrewBuff)or z>10)and(h:BuffStack(u.TransferthePowerBuff)==10 and not u.CraneVortex:IsAvailable()or z>5 and u.CraneVortex:IsAvailable()and h:BuffStack(u.TransferthePowerBuff)==10 or z>14 or z>12 and not u.CraneVortex:IsAvailable()))then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoelust 18"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and not as()and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 20"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 22"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 24"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffUp(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.BlackoutKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 26"end end;if u.BlackoutKick:IsReady()and(h:HasTier(31,2)and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 28"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 30"end end;if u.BlackoutKick:IsReady()and(z<6 and ah(u.BlackoutKick)and h:HasTier(31,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 32"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_aoelust 34"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:BuffUp(u.CalltoDominanceBuff)and z<10)then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,aJ,not i:IsInMeleeRange(8))then a1=392983;return"strike_of_the_windlord serenity_aoelust 36"end end;if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<2 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_aoelust 38"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=392983;return"strike_of_the_windlord serenity_aoelust 40"end end;if u.FistsofFury:IsReady()and h:BuffUp(u.InvokersDelightBuff)then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoelust 42"end end;if h:IsChanneling(u.FistsofFury)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_aoelust 44"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 46"end end;if u.BlackoutKick:IsReady()and(z<6 and ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 48"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 50"end end;if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and z==5)then if ac.CastTargetIf(u.TigerPalm,x,"min",aB,ay,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_aoelust 52"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity_aoelust 54"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and z>=3 and ah(u.BlackoutKick))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 56"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_aoelust 58"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoelust 60"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_aoelust 62"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity_aoelust 64"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoelust 66"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_aoelust 68"end end end;local function aY()if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<1 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_lust 2"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffRemains(u.SerenityBuff)<1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 4"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_lust 6"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2)and z>2)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 8"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_lust 10"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff)and z>2)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_lust 12"end end;if u.RisingSunKick:IsReady()and(ah(u.RisingSunKick)and(z<3 or not h:HasTier(31,2)))then if ac.CastTargetIf(u.RisingSunKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_lust 14"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.FistsofFury)and u.ShadowboxingTreads:IsAvailable()and h:HasTier(31,2)and not u.DanceofChiji:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_lust 16"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.FistsofFury)and i:DebuffRemains(u.SkyreachExhaustionDebuff)>55 and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 18"end end;if u.FistsofFury:IsReady()and(h:BuffUp(u.InvokersDelightBuff)and(z<3 or not h:HasTier(31,2)))then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_lust 20"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as()and h:BuffDown(u.BlackoutReinforcementBuff)and z>2 and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 22"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as()and h:BuffUp(u.BlackoutReinforcementBuff)and z>2 and h:PrevGCD(1,u.BlackoutKick)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 24"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as()and h:BuffUp(u.BonedustBrewBuff)and z>2 and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 26"end end;if h:IsChanneling(u.FistsofFury)and(z<3 or not h:HasTier(31,2))then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_lust 28"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 30"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:BuffUp(u.BonedustBrewBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 32"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_lust 34"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_lust 36"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_lust 38"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_lust 40"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_lust 42"end end end;local function aZ()if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<1 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_aoe 2"end end;if u.StrikeoftheWindlord:IsReady()and(h:HasTier(31,4)and u.Thunderfist:IsAvailable())then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_aoe 4"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 6"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2)and h:BuffUp(u.BonedustBrewBuff)and z>4)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 8"end end;if h:IsChanneling(u.FistsofFury)and h:BuffStack(u.ChiEnergyBuff)==30 then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_aoe 10"end end;if u.FistsofFury:IsReady()and u.JadeIgnition:IsAvailable()then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoe 12"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 14"end end;if u.FistsofFury:IsReady()and(h:BuffUp(u.InvokersDelightBuff)and h:HasTier(31,2)and(h:BuffDown(u.BonedustBrewBuff)or z>10)and(h:BuffStack(u.TransferthePowerBuff)==10 and not u.CraneVortex:IsAvailable()or z>5 and u.CraneVortex:IsAvailable()and h:BuffStack(u.TransferthePowerBuff)==10 or z>14 or z>12 and not u.CraneVortex:IsAvailable()))then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoe 16"end end;if not h:HasTier(30,2)and h:HasTier(31,2)and(h:BuffDown(u.BonedustBrewBuff)or z>10)and(h:BuffStack(u.TransferthePowerBuff)==10 and not u.CraneVortex:IsAvailable()or z>5 and u.CraneVortex:IsAvailable()and h:BuffStack(u.TransferthePowerBuff)==10 or z>14 or z>12 and not u.CraneVortex:IsAvailable())and h:BuffDown(u.BonedustBrewBuff)or h:BuffStack(u.FuryofXuenBuff)>90 then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_aoe 18"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and not as()and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoe 20"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoe 22"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 24"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffUp(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.BlackoutKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 26"end end;if u.BlackoutKick:IsReady()and(h:HasTier(31,2)and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoe 28"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffUp(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.BlackoutKick))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 30"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_aoe 32"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_aoe 34"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:BuffUp(u.CalltoDominanceBuff)and z<10)then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,aJ,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_aoe 36"end end;if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<2 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_aoe 38"end end;if u.FistsofFury:IsReady()and h:BuffUp(u.InvokersDelightBuff)then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_aoe 40"end end;if h:IsChanneling(u.FistsofFury)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_aoe 42"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_aoe 44"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 46"end end;if u.BlackoutKick:IsReady()and(z<6 and ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoe 48"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 50"end end;if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and z==5)then if ac.CastTargetIf(u.TigerPalm,x,"min",aB,ay,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_aoe 52"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity_aoe 54"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and z>=3 and ah(u.BlackoutKick))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoe 56"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_aoe 58"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_aoe 60"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_aoe 62"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_aoe 64"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_aoe 66"end end end;local function a_()if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<1 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_4t 2"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffRemains(u.SerenityBuff)<1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 4"end end;if u.StrikeoftheWindlord:IsReady()and(h:HasTier(31,4)and u.Thunderfist:IsAvailable())then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_4t 6"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 8"end end;if h:IsChanneling(u.FistsofFury)and(not h:HasTier(30,2)and h:BuffStack(u.FuryofXuenBuff)>90)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_4t 10"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:HasTier(31,2)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 12"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_4t 14"end end;if u.BlackoutKick:IsReady()and(h:HasTier(31,2)and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_4t 16"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and u.CraneVortex:IsAvailable())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 18"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and not u.BonedustBrew:IsAvailable())then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_4t 20"end end;if u.FistsofFury:IsReady()and(h:BuffUp(u.InvokersDelightBuff)and h:HasTier(31,2)and h:BuffStack(u.TransferthePowerBuff)>5 and not u.CraneVortex:IsAvailable()and h:BloodlustUp())then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_4t 22"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_4t 24"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_4t 26"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:HasTier(31,2)and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 28"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:BuffUp(u.CalltoDominanceBuff))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,aJ,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_4t 30"end end;if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<2 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_4t 32"end end;if u.FistsofFury:IsReady()and h:BuffUp(u.InvokersDelightBuff)then if ac.CastTargetIf(u.FistsofFury,x,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_4t 34"end end;if h:IsChanneling(u.FistsofFury)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_4t 36"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_4t 38"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 40"end end;if u.RisingSunKick:IsReady()and h:BuffUp(u.PressurePointBuff)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_4t 42"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_4t 44"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 46"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_4t 48"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_4t 50"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_4t 52"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_4t 54"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity_4t 56"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_4t 58"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_4t 60"end end end;local function b0()if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<1 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_3t 2"end end;if u.BlackoutKick:IsReady()and(h:HasTier(31,2)and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 4"end end;if u.TigerPalm:IsReady()and ah(u.TigerPalm)then if ac.CastTargetIf(u.TigerPalm,x,"min",aB,ay,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_3t 6"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and as()and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_3t 8"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:BuffUp(u.CalltoDominanceBuff))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,aJ,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_3t 10"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,aK,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_3t 12"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 14"end end;if u.FistsofFury:IsReady()and(h:BuffUp(u.InvokersDelightBuff)and not h:HasTier(31,2))then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_3t 16"end end;if h:IsChanneling(u.FistsofFury)and(not h:HasTier(31,2)or h:BuffStack(u.FuryofXuenBuff)>90)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_3t 18"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as()and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2)and u.CraneVortex:IsAvailable())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_3t 20"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and as()and h:BuffUp(u.BlackoutReinforcementBuff)and h:HasTier(31,2)and h:PrevGCD(1,u.BlackoutKick)and u.CraneVortex:IsAvailable())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_3t 22"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffDown(u.PressurePointBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 24"end end;if u.RisingSunKick:IsReady()and h:BuffUp(u.PressurePointBuff)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_3t 26"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_3t 28"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_3t 30"end end;if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<2 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_3t 32"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_3t 34"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and as()and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_3t 36"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 38"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_3t 40"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==2)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 42"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 44"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_3t 46"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_3t 47"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_3t 48"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity_3t 50"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_3t 52"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_3t 54"end end end;local function b1()if u.JadefireStomp:IsCastable()and(i:DebuffRemains(u.JadefireBrandDebuff)<2 and not(i:DebuffRemains(u.SkyreachExhaustionDebuff)<2)and i:DebuffDown(u.SkyreachExhaustionDebuff))then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_2t 2"end end;if u.TigerPalm:IsReady()and ah(u.TigerPalm)then if ac.CastTargetIf(u.TigerPalm,x,"min",aB,ay,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_2t 4"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_2t 6"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.FistsofFury)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_2t 8"end end;if u.RisingSunKick:IsReady()then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,aH,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_2t 10"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_2t 12"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_2t 14"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:BuffUp(u.CalltoDominanceBuff))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,aJ,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_2t 16"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,aK,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_2t 18"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_2t 20"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_2t 22"end end;if u.FistsofFury:IsReady()and h:BuffUp(u.InvokersDelightBuff)then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_2t 24"end end;if h:IsChanneling(u.FistsofFury)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_2t 26"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_2t 28"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_2t 30"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_2t 32"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_2t 34"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==2)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_2t 36"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and u.FistsofFury:CooldownRemains()>5 and u.ShadowboxingTreads:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_2t 38"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_2t 40"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"max",aF,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_2t 42"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_2t 44"end end end;local function b2()if u.JadefireStomp:IsCastable()and(i:DebuffRemains(u.JadefireBrandDebuff)<2 and i:DebuffDown(u.SkyreachExhaustionDebuff))then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_st 2"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffRemains(u.SerenityBuff)<1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,4))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_st 4"end end;if u.TigerPalm:IsReady()and(i:DebuffDown(u.SkyreachExhaustionDebuff)and ah(u.TigerPalm))then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_st 6"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_st 8"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:HasTier(31,4))then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_st 10"end end;if u.RisingSunKick:IsReady()and ah(u.RisingSunKick)then if q(u.RisingSunKick,nil,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity_st 12"end end;if u.JadefireStomp:IsCastable()and i:DebuffRemains(u.JadefireBrandDebuff)<2 then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp serenity_st 14"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:BuffUp(u.CalltoDominanceBuff)and i:DebuffRemains(u.SkyreachExhaustionDebuff)>h:BuffRemains(u.CalltoDominanceBuff))then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_st 16"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and i:DebuffRemains(u.SkyreachExhaustionDebuff)>55)then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_st 18"end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.RisingSunKick)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_st 20"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:HasTier(31,2)and h:BuffUp(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.RisingSunKick))then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity_st 22"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.FistsofFury)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_st 24"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff)and h:PrevGCD(1,u.FistsofFury)and h:HasTier(31,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick serenity_st 26"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2)and h:PrevGCD(1,u.FistsofFury))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_st 27"end end;if u.FistsofFury:IsReady()and h:BuffUp(u.InvokersDelightBuff)then if q(u.FistsofFury,nil,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity_st 28"end end;if h:IsChanneling(u.FistsofFury)then if r(u.StopFoF,false,"STOP")then a1=113656;a1=113656;return"fists_of_fury_cancel serenity_st 30"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_st 32"end end;if u.StrikeoftheWindlord:IsReady()and i:DebuffRemains(u.SkyreachExhaustionDebuff)>h:BuffRemains(u.CalltoDominanceBuff)then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity_st 34"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:HasTier(30,2))then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then a1=100784;return"blackout_kick serenity_st 36"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then a1=100784;return"blackout_kick serenity_st 38"end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity_st 40"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity_st 42"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity_st 44"end end end;local function b3()if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_aoe 2"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and not u.HitCombo:IsAvailable()and as()and h:BuffUp(u.BonedustBrewBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_aoe 4"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_aoe 6"end end;if u.WhirlingDragonPunch:IsReady()and z>8 then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_aoe 8"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffUp(u.BonedustBrewBuff)and ah(u.SpinningCraneKick)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_aoe 10"end end;if u.FistsofFury:IsReady()then if ac.CastTargetIf(u.FistsofFury,x,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_aoe 12"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.BonedustBrewBuff)and h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_aoe 14"end end;if u.BlackoutKick:IsReady()and(h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_aoe 16"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_aoe 18"end end;if u.WhirlingDragonPunch:IsReady()and z>=5 then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_aoe 20"end end;if u.RisingSunKick:IsReady()and(h:HasTier(30,2)or u.WhirlingDragonPunch:IsAvailable()and u.WhirlingDragonPunch:CooldownRemains()<3 and u.FistsofFury:CooldownRemains()>3 and h:BuffDown(u.KicksofFlowingMomentumBuff))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_aoe 22"end end;if u.ExpelHarm:IsReady()and(h:Chi()==1 and(u.RisingSunKick:CooldownUp()or u.StrikeoftheWindlord:CooldownUp())or h:Chi()==2 and u.FistsofFury:CooldownUp())then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm default_aoe 24"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and u.FistsofFury:CooldownRemains()<5 and h:BuffStack(u.ChiEnergyBuff)>10)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_aoe 26"end end;if u.ChiBurst:IsCastable()and(h:Chi()<5 and(h:BloodlustUp()or h:Energy()<50))then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_aoe 28"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and(u.FistsofFury:CooldownRemains()>3 or h:Chi()>2)and as()and h:BuffDown(u.BlackoutReinforcementBuff)and(h:BloodlustUp()or h:BuffUp(u.InvokersDelightBuff)))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_aoe 30"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick)and h:HasTier(30,2)and h:BuffDown(u.BonedustBrewBuff)and(z<15 and not u.CraneVortex:IsAvailable()or z<8))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_aoe 32"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and(u.FistsofFury:CooldownRemains()>3 or h:Chi()>4)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_aoe 34"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_aoe 38"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_aoe 40"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick)and not as())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_aoe 42"end end;if u.ChiBurst:IsReady()and(h:ChiDeficit()>=1 and z==1 or h:ChiDeficit()>=2)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_aoe 44"end end end;local function b4()if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and h:Chi()<2 and(u.FistsofFury:CooldownRemains()<1 or u.StrikeoftheWindlord:CooldownRemains()<1)and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm default_4t 2"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and as()and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_4t 4"end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_4t 6"end end;if u.FistsofFury:IsReady()then if ac.CastTargetIf(u.FistsofFury,x,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_4t 8"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.BonedustBrewBuff)and h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_4t 10"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_4t 12"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffUp(u.BonedustBrewBuff)and ah(u.SpinningCraneKick)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_4t 14"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_4t 16"end end;if u.RisingSunKick:IsReady()and(h:BuffDown(u.BonedustBrewBuff)and h:BuffUp(u.PressurePointBuff)and u.FistsofFury:CooldownRemains()>5)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_4t 18"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind default_4t 20"end end;if u.BlackoutKick:IsReady()and(h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_4t 22"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_4t 24"end end;if u.ExpelHarm:IsReady()and(h:Chi()==1 and(u.RisingSunKick:CooldownUp()or u.StrikeoftheWindlord:CooldownUp())or h:Chi()==2 and u.FistsofFury:CooldownUp())then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm default_4t 26"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and u.FistsofFury:CooldownRemains()>3 and h:BuffStack(u.ChiEnergyBuff)>10)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_4t 28"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_4t 30"end end;if u.ChiBurst:IsCastable()and(h:Chi()<5 and(h:BloodlustUp()or h:Energy()<50))then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_4t 32"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and(u.FistsofFury:CooldownRemains()>3 or h:Chi()>4)and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_4t 34"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_4t 36"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_4t 40"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and(u.FistsofFury:CooldownRemains()>3 or h:Chi()>4))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_4t 42"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_4t 44"end end end;local function b5()if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and h:Chi()<2 and(u.RisingSunKick:CooldownRemains()<1 or u.FistsofFury:CooldownRemains()<1 or u.StrikeoftheWindlord:CooldownRemains()<1)and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm default_3t 2"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_3t 4"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:HasTier(31,4))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_3t 6"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and(u.InvokeXuenTheWhiteTiger:CooldownRemains()>20 or B<5))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_3t 8"end end;if u.BlackoutKick:IsReady()and(h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 10"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 12"end end;if u.FistsofFury:IsReady()then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_3t 14"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.BonedustBrewBuff)and h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_3t 16"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffUp(u.BonedustBrewBuff)and ah(u.SpinningCraneKick))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_3t 18"end end;if u.RisingSunKick:IsReady()and(h:BuffDown(u.BonedustBrewBuff)and h:BuffUp(u.PressurePointBuff))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_3t 20"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_3t 22"end end;if u.ExpelHarm:IsReady()and(h:Chi()==1 and(u.RisingSunKick:CooldownUp()or u.StrikeoftheWindlord:CooldownUp())or h:Chi()==2 and u.FistsofFury:CooldownUp())then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm default_3t 24"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==2 then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 26"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_3t 28"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.TeachingsoftheMonasteryBuff)and(u.ShadowboxingTreads:IsAvailable()or u.RisingSunKick:CooldownRemains()>1))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 30"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_3t 32"end end;if u.ChiBurst:IsCastable()and(h:Chi()<5 and(h:BloodlustUp()or h:Energy()<50))then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_3t 34"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 36"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and u.FistsofFury:CooldownRemains()<3 and h:BuffStack(u.ChiEnergyBuff)>15)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_3t 38"end end;if u.RisingSunKick:IsReady()and(u.FistsofFury:CooldownRemains()>4 and h:Chi()>3)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_3t 40"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and u.RisingSunKick:CooldownDown()and u.FistsofFury:CooldownDown()and h:Chi()>4 and(u.StormEarthAndFire:IsAvailable()and not u.BonedustBrew:IsAvailable()or u.Serenity:IsAvailable()))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_3t 42"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and u.FistsofFury:CooldownDown())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 44"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind default_3t 46"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and u.ShadowboxingTreads:IsAvailable()and not as())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_3t 48"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and(ah(u.SpinningCraneKick)and(h:Chi()>5 and u.StormEarthAndFire:IsAvailable()or h:Chi()>4 and u.Serenity:IsAvailable())))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_3t 50"end end end;local function b6()if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and h:Chi()<2 and(u.RisingSunKick:CooldownRemains()<1 or u.FistsofFury:CooldownRemains()<1 or u.StrikeoftheWindlord:CooldownRemains()<1)and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm default_2t 2"end end;if u.ExpelHarm:IsReady()and(h:Chi()==1 and(u.RisingSunKick:CooldownUp()or u.StrikeoftheWindlord:CooldownUp())or h:Chi()==2 and u.FistsofFury:CooldownUp())then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm default_2t 4"end end;if u.BlackoutKick:IsReady()and(h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 6"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and h:HasTier(31,4))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_2t 8"end end;if u.StrikeoftheWindlord:IsReady()and(u.Thunderfist:IsAvailable()and(u.InvokeXuenTheWhiteTiger:CooldownRemains()>20 or B<5))then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_2t 10"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff)and h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_2t 12"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and ah(u.BlackoutKick)and h:BuffUp(u.BlackoutReinforcementBuff))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 13"end end;if u.FistsofFury:IsReady()and not h:HasTier(30,2)then if ac.CastTargetIf(u.FistsofFury,y,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_2t 14"end end;if u.FistsofFury:IsReady()then if ac.CastTargetIf(u.FistsofFury,x,"max",aF,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_2t 16"end end;if u.RisingSunKick:IsReady()and u.FistsofFury:CooldownUp()then if q(u.RisingSunKick,nil,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick default_2t 18"end end;if u.RisingSunKick:IsReady()and h:HasTier(30,2)then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_2t 20"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.KicksofFlowingMomentumBuff)or h:BuffUp(u.PressurePointBuff))then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,aI,not i:IsInMeleeRange(5))then return"rising_sun_kick default_2t 22"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_2t 24"end end;if u.ChiBurst:IsCastable()and(h:BloodlustUp()and h:Chi()<5)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_2t 26"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==2 then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 28"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and h:Chi()>2 and h:PrevGCD(1,u.RisingSunKick))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 30"end end;if u.ChiBurst:IsCastable()and(h:Chi()<5 and h:Energy()<50)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_2t 32"end end;if u.StrikeoftheWindlord:IsReady()then if ac.CastTargetIf(u.StrikeoftheWindlord,x,"max",aF,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_2t 34"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.TeachingsoftheMonasteryBuff)and(u.ShadowboxingTreads:IsAvailable()or u.RisingSunKick:CooldownRemains()>1))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 36"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_2t 38"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 40"end end;if u.RisingSunKick:IsReady()and(not u.ShadowboxingTreads:IsAvailable()and u.FistsofFury:CooldownRemains()>4 and u.XuensBattlegear:IsAvailable())then if ac.CastTargetIf(u.RisingSunKick,x,"min",aC,an,not i:IsInMeleeRange(5))then return"rising_sun_kick default_2t 42"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and u.RisingSunKick:CooldownDown()and u.FistsofFury:CooldownDown()and(h:BuffDown(u.BonedustBrewBuff)or ap()<1.5))then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 44"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind default_2t 46"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffUp(u.BonedustBrewBuff)and ah(u.SpinningCraneKick)and ap()>=2.7)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_2t 48"end end;if u.RisingSunKick:IsReady()then if ac.CastTargetIf(u.RisingSunKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick default_2t 50"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick default_2t 52"end end;if u.JadefireStomp:IsCastable()and ah(u.JadefireStomp)then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp default_2t 54"end end end;local function b7()if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and h:Chi()<2 and(u.RisingSunKick:CooldownRemains()<1 or u.FistsofFury:CooldownRemains()<1 or u.StrikeoftheWindlord:CooldownRemains()<1)and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm default_st 2"end end;if u.ExpelHarm:IsReady()and(h:Chi()==1 and(u.RisingSunKick:CooldownUp()or u.StrikeoftheWindlord:CooldownUp())or h:Chi()==2 and u.FistsofFury:CooldownUp()and u.RisingSunKick:CooldownDown())then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(20))then a1=322101;return"expel_harm default_st 4"end end;if u.StrikeoftheWindlord:IsReady()and(h:BuffUp(u.DomineeringArroganceBuff)and u.Thunderfist:IsAvailable()and u.Serenity:IsAvailable()and u.InvokeXuenTheWhiteTiger:CooldownRemains()>20 or B<5 or u.Thunderfist:IsAvailable()and i:DebuffRemains(u.SkyreachExhaustionDebuff)>10 and h:BuffDown(u.DomineeringArroganceBuff)or u.Thunderfist:IsAvailable()and i:DebuffRemains(u.SkyreachExhaustionDebuff)>35 and not u.Serenity:IsAvailable())then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_st 6"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and h:HasTier(31,2)and h:BuffDown(u.BlackoutReinforcementBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_st 10"end end;if u.RisingSunKick:IsReady()and u.FistsofFury:CooldownUp()then if q(u.RisingSunKick,nil,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick default_st 12"end end;if u.FistsofFury:IsReady()and(h:BuffDown(u.PressurePointBuff)and i:DebuffRemains(u.SkyreachExhaustionDebuff)<55 and(i:DebuffRemains(u.JadefireBrandDebuff)>2 or u.JadefireStomp:CooldownDown()))then if q(u.FistsofFury,nil,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_st 14"end end;if u.JadefireStomp:IsCastable()and(i:DebuffRemains(u.SkyreachExhaustionDebuff)<1 and i:DebuffRemains(u.JadefireBrandDebuff)<3)then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp default_st 16"end end;if u.RisingSunKick:IsReady()and(h:BuffUp(u.PressurePointBuff)or i:DebuffRemains(u.SkyreachExhaustionDebuff)>55)then if q(u.RisingSunKick,nil,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick default_st 18"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.PressurePointBuff)and h:Chi()>2 and h:PrevGCD(1,u.RisingSunKick))then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 20"end end;if u.BlackoutKick:IsReady()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 22"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.BlackoutReinforcementBuff)and u.RisingSunKick:CooldownDown()and ah(u.BlackoutKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 24"end end;if u.RisingSunKick:IsReady()then if q(u.RisingSunKick,nil,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick default_st 26"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.BlackoutReinforcementBuff)and ah(u.BlackoutKick))then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 28"end end;if u.FistsofFury:IsReady()then if q(u.FistsofFury,nil,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury default_st 30"end end;if u.WhirlingDragonPunch:IsReady()and h:BuffDown(u.PressurePointBuff)then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_st 32"end end;if u.ChiBurst:IsCastable()and(h:BloodlustUp()and h:Chi()<5)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_st 34"end end;if u.BlackoutKick:IsReady()and(h:BuffStack(u.TeachingsoftheMonasteryBuff)==2 and i:DebuffRemains(u.SkyreachExhaustionDebuff)>1)then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 36"end end;if u.ChiBurst:IsCastable()and(h:Chi()<5 and h:Energy()<50)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst default_st 38"end end;if u.StrikeoftheWindlord:IsReady()and(i:DebuffRemains(u.SkyreachExhaustionDebuff)>30 or B<5)then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord default_st 40"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and not h:HasTier(31,2))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_st 42"end end;if u.BlackoutKick:IsReady()and(h:BuffUp(u.TeachingsoftheMonasteryBuff)and u.RisingSunKick:CooldownRemains()>1)then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 44"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and h:BuffUp(u.BonedustBrewBuff)and ah(u.SpinningCraneKick)and ap()>=2.7)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick default_st 46"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch default_st 48"end end;if u.RushingJadeWind:IsReady()and h:BuffDown(u.RushingJadeWindBuff)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind default_st 50"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick default_st 52"end end end;local function b8()if u.CracklingJadeLightning:IsReady()and(h:BuffStack(u.TheEmperorsCapacitorBuff)>19 and af()>u.CracklingJadeLightning:ExecuteTime()-1 and u.RisingSunKick:CooldownRemains()>u.CracklingJadeLightning:ExecuteTime()or h:BuffStack(u.TheEmperorsCapacitorBuff)>14 and(u.Serenity:CooldownRemains()<5 and u.Serenity:IsAvailable()or B<5))then if q(u.CracklingJadeLightning,nil,nil,not i:IsSpellInRange(u.CracklingJadeLightning))then return"crackling_jade_lightning fallthru 2"end end;if u.JadefireStomp:IsCastable()and ah(u.JadefireStomp)then if q(u.JadefireStomp,nil,nil,not i:IsInRange(30))then a1=388193;return"jadefire_stomp fallthru 4"end end;if u.TigerPalm:IsReady()and(ah(u.TigerPalm)and h:ChiDeficit()>=2+s(h:BuffUp(u.PowerStrikesBuff)))then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm fallthru 6"end end;if u.ExpelHarm:IsReady()and(h:ChiDeficit()>=1 and z>2)then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm fallthru 8"end end;if u.ChiBurst:IsCastable()and(h:ChiDeficit()>=1 and z==1 or h:ChiDeficit()>=2 and z>=2)then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst fallthru 10"end end;if u.ChiWave:IsCastable()then if q(u.ChiWave,nil,nil,not i:IsInRange(40))then a1=115098;return"chi_wave fallthru 12"end end;if u.ExpelHarm:IsReady()and h:ChiDeficit()>=1 then if q(u.ExpelHarm,nil,nil,not i:IsInMeleeRange(8))then a1=322101;return"expel_harm fallthru 14"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and z>=5)then if ac.CastTargetIf(u.BlackoutKick,x,"min",aC,ax,not i:IsInMeleeRange(5))then return"blackout_kick fallthru 16"end end;if u.SpinningCraneKick:IsReady()and(B>h:SpellHaste()*1.5 and ah(u.SpinningCraneKick)and h:BuffStack(u.ChiEnergyBuff)>30-5*z and h:BuffDown(u.StormEarthAndFireBuff)and(u.RisingSunKick:CooldownRemains()>2 and u.FistsofFury:CooldownRemains()>2 or u.RisingSunKick:CooldownRemains()<3 and u.FistsofFury:CooldownRemains()>3 and h:Chi()>3 or u.RisingSunKick:CooldownRemains()>3 and u.FistsofFury:CooldownRemains()<3 and h:Chi()>4 or h:ChiDeficit()<=1 and af()<2)or h:BuffStack(u.ChiEnergyBuff)>10 and B<7)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick fallthru 18"end end;if u.ArcaneTorrent:IsCastable()and h:ChiDeficit()>=1 then if q(u.ArcaneTorrent,nil)then a1=50613;return"arcane_torrent fallthru 20"end end;if u.FlyingSerpentKick:IsCastable()and not ae.Windwalker.IgnoreFSK then if q(u.FlyingSerpentKick,nil,nil,not i:IsInRange(30))then a1=101545;return"flying_serpent_kick fallthru 22"end end;if u.TigerPalm:IsReady()then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm fallthru 24"end end end;local function b9()if u.FistsofFury:IsReady()and h:BuffRemains(u.SerenityBuff)<1 then if q(u.FistsofFury,nil,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity 2"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and not as()and z>4 and u.ShadowboxingTreads:IsAvailable())then if ac.CastTargetIf(u.BlackoutKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity 4"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and h:BuffStack(u.TeachingsoftheMonasteryBuff)==3 and h:BuffRemains(u.TeachingsoftheMonasteryBuff)<1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity 6"end end;if u.RisingSunKick:IsReady()and(z==4 and h:BuffUp(u.PressurePointBuff)and not u.BonedustBrew:IsAvailable()or z==1 or z<=3 and h:BuffUp(u.PressurePointBuff)or h:BuffUp(u.PressurePointBuff)and h:HasTier(30,2))then if ac.CastTargetIf(u.RisingSunKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity 8"end end;if u.FistsofFury:IsReady()and(h:BuffUp(u.InvokersDelightBuff)and(z<3 and u.JadeIgnition:IsAvailable()or z>4)or h:BloodlustUp()or z==2)then if q(u.FistsofFury,nil,nil,not i:IsInMeleeRange(8))then a1=113656;return"fists_of_fury serenity 10"end end;if u.FistsofFury:IsReady()then local ba=aw()if ba then if ba:GUID()==i:GUID()then if n.CastQueue(u.FistsofFury,u.StopFoF)then a1=113656;return"fists_of_fury one_gcd serenity 14"end else if n.CastLeftNameplate(ba,u.FistsofFury)then a1=113656;return"fists_of_fury one_gcd off-target serenity 14"end end end end;if u.StrikeoftheWindlord:IsReady()and u.Thunderfist:IsAvailable()then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity 2"end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff)and z>=2)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity 14"end end;if u.RisingSunKick:IsReady()and(z==4 and h:BuffUp(u.PressurePointBuff))then if ac.CastTargetIf(u.RisingSunKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity 16"end end;if u.BlackoutKick:IsReady()and(z==3 and ah(u.BlackoutKick)and h:HasTier(30,2))then if ac.CastTargetIf(u.BlackoutKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity "end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and z>=3 and as())then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity 20"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and z>1 and z<4 and h:BuffStack(u.TeachingsoftheMonasteryBuff)==2)then if ac.CastTargetIf(u.BlackoutKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity 18"end end;if u.RushingJadeWind:IsReady()and(h:BuffDown(u.RushingJadeWindBuff)and z>=5)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity 22"end end;if u.BlackoutKick:IsReady()and(u.ShadowboxingTreads:IsAvailable()and z>=3 and ah(u.BlackoutKick))then if ac.CastTargetIf(u.BlackoutKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity 24"end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and(z>3 or z>2 and ap()>=2.3))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity 26"end end;if u.StrikeoftheWindlord:IsReady()and z>=3 then if q(u.StrikeoftheWindlord,nil,nil,not i:IsInMeleeRange(9))then a1=392983;return"strike_of_the_windlord serenity 28"end end;if u.RisingSunKick:IsReady()and(z==2 and u.FistsofFury:CooldownRemains()>5)then if ac.CastTargetIf(u.RisingSunKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity 30"end end;if u.BlackoutKick:IsReady()and(ah(u.BlackoutKick)and z==2 and u.FistsofFury:CooldownRemains()>5 and u.ShadowboxingTreads:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)==1)then if ac.CastTargetIf(u.BlackoutKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity 32"end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and z>1)then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity 34"end end;if u.WhirlingDragonPunch:IsReady()and z>1 then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity 36"end end;if u.RushingJadeWind:IsReady()and(h:BuffDown(u.RushingJadeWindBuff)and z>=3)then if q(u.RushingJadeWind,nil,nil,not i:IsInMeleeRange(8))then a1=116847;return"rushing_jade_wind serenity 38"end end;if u.RisingSunKick:IsReady()then if ac.CastTargetIf(u.RisingSunKick,x,"min",az,nil,not i:IsInMeleeRange(5))then return"rising_sun_kick serenity 40"end end;if u.SpinningCraneKick:IsReady()and(ah(u.SpinningCraneKick)and h:BuffUp(u.DanceofChijiBuff))then if q(u.SpinningCraneKick,nil,nil,not i:IsInMeleeRange(8))then a1=101546;return"spinning_crane_kick serenity 42"end end;if u.BlackoutKick:IsReady()and ah(u.BlackoutKick)then if q(u.BlackoutKick,nil,nil,not i:IsInMeleeRange(5))then return"blackout_kick serenity 44"end end;if u.WhirlingDragonPunch:IsReady()then if q(u.WhirlingDragonPunch,nil,nil,not i:IsInMeleeRange(5))then a1=152175;return"whirling_dragon_punch serenity 46"end end;if u.TigerPalm:IsReady()and(u.TeachingsoftheMonastery:IsAvailable()and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3)then if q(u.TigerPalm,nil,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm serenity 48"end end end;local function bb()P=HeroRotationCharDB.Toggles[5]O=HeroRotationCharDB.Toggles[4]_=HeroRotationCharDB.Toggles[12]Q=not HeroRotationCharDB.Toggles[15]R=HeroRotationCharDB.Toggles[31]S=HeroRotationCharDB.Toggles[32]T=HeroRotationCharDB.Toggles[33]U=HeroRotationCharDB.Toggles[34]V=HeroRotationCharDB.Toggles[35]W=HeroRotationCharDB.Toggles[36]X=HeroRotationCharDB.Toggles[37]Y=HeroRotationCharDB.Toggles[38]Z=HeroRotationCharDB.Toggles[39]a2=false;xuenready=false;SEFReady=false;if ae.Windwalker.IncludedCooldowns.Xuen and p()or ae.Windwalker.IncludedSmallCooldowns.Xuen and(p()or O)or not ae.Windwalker.IncludedSmallCooldowns.Xuen and not ae.Windwalker.IncludedCooldowns.Xuen and not ae.Windwalker.IncludedSmallCooldowns.SEFEcho and not ae.Windwalker.IncludedCooldowns.SEFEco then xuenready=true end;if ae.Windwalker.IncludedCooldowns.SEFFull and p()or ae.Windwalker.IncludedSmallCooldowns.SEFFull and(p()or O)or not ae.Windwalker.IncludedSmallCooldowns.SEFFull and not ae.Windwalker.IncludedCooldowns.SEFFull or(ae.Windwalker.IncludedCooldowns.SEFEco and p()and u.StormEarthAndFire:ChargesFractional()>ae.Windwalker.SEFEcoCharge or ae.Windwalker.IncludedSmallCooldowns.SEFEco and(p()or O)and u.StormEarthAndFire:ChargesFractional()>ae.Windwalker.SEFEcoCharge or not ae.Windwalker.IncludedSmallCooldowns.SEFEco and not ae.Windwalker.IncludedCooldowns.SEFEco and u.StormEarthAndFire:ChargesFractional()>ae.Windwalker.SEFEcoCharge)then SEFReady=true end;QuakingR=0;for bc=1,20 do if select(10,UnitDebuff("player",bc))==240447 then if select(6,UnitDebuff("player",bc))~=nil then QuakingR=select(6,UnitDebuff("player",bc))-GetTime()end end end;a4=GetInventoryItemID("player",13)a5=GetInventoryItemID("player",14)if not ae.Commons.Enabled.TopTrinket and not ae.Commons.Enabled.BotTrinket then w={a4,a5}elseif not ae.Commons.Enabled.TopTrinket and ae.Commons.Enabled.BotTrinket then w={a4}elseif not ae.Commons.Enabled.BotTrinket and ae.Commons.Enabled.TopTrinket then w={a5}end end;local function bd()local be=0;local bf={322968,319603,319611,325876,334493,334496,332605,328494,326836,336277,319669,323831,330725,333299}if UnitExists("mouseover")then if UnitIsDead("mouseover")==true and UnitCanAttack("player","mouseover")~=true then be=9999 else for bc=0,40 do local al,al,bg,bh,al,al,al,al,al,bi=UnitDebuff("mouseover",bc)for al,bj in pairs(bf)do if bj==bi then if bh=="Magic"then be=1 elseif bh=="Poison"then be=2 elseif bh=="Disease"then be=3 elseif bh=="Curse"then be=4 end end end end end end;if be==2 or DebuffCheckC==3 and u.Detox:IsReady()and g("mouseover"):IsInRange(40)then if n.Cast(u.Detox,nil,nil,not i:IsInRange(40))then a1=218164;return"Detox MO"end end end;local function bk()x=h:GetEnemiesInMeleeRange(5)y=h:GetEnemiesInMeleeRange(8)if o()then z=#y else z=1 end;if not BotOn then a0=0;a1=0;a3=0 end;if a0>0 then a0=0 end;if a1>0 then a1=0 end;if a3>0 then a3=0 end;ShouldReturn=bb()if not i:IsInMeleeRange(10)and z>0 and ae.Windwalker.TargetSwap=="AutoSwap"and not _ then a0=999 end;ShouldReturn=bd()if ac.TargetIsValid()or h:AffectingCombat()then A=d.BossFightRemains()B=A;if B==11111 then B=d.FightRemains(y,false)end end;if ac.TargetIsValid()or h:AffectingCombat()then C=u.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 end;if ac.TargetIsValid()then if not h:AffectingCombat()then local ShouldReturn=aL()if ShouldReturn then return ShouldReturn end end;if ac.TargetIsValid()and not h:IsDeadOrGhost()and h:AffectingCombat()then if not ae.Windwalker.IgnoreFSK and h:PrevGCD(1,u.FlyingSerpentKick)then if q(u.FlyingSerpentKickLand)then a1=101545;return"flying_serpent_kick land"end end end;local ShouldReturn=ac.Interrupt(u.SpearHandStrike,ae.Commons.OffGCDasOffGCD.Interrupts,N)if ShouldReturn then return ShouldReturn end;E=not u.InvokeXuenTheWhiteTiger:IsAvailable()or 120>B;F=not(i:DebuffRemains(u.SkyreachExhaustionDebuff)<1)and u.RisingSunKick:CooldownRemains()<1 and(h:HasTier(30,2)or z<5)G=not(i:DebuffRemains(u.SkyreachExhaustionDebuff)<1)and u.BonedustBrew:CooldownRemains()<1 and z==1;if ae.Commons.Enabled.Potions then local bl=ac.PotionSelected()if bl and bl:IsReady()and(h:BloodlustUp()and n.GUISettings.General.HoldPotforBL)then if u.InvokeXuenTheWhiteTiger:IsAvailable()then if h:BuffUp(u.SerenityBuff)or h:BuffUp(u.StormEarthAndFireBuff)and C or B<=30 then if q(bl,nil,nil)then a1=32;return"potion with xuen main 4"end end else if h:BuffUp(u.SerenityBuff)or h:BuffUp(u.StormEarthAndFireBuff)or B<=30 then if q(bl,nil,nil)then a1=32;return"potion without xuen main 6"end end end end end;if h:IsChanneling(u.FistsofFury)and Y then if n.Cast(u.PoolEnergy,nil,nil,nil)then a1=1000;return"Casting FoF"end end;if h:IsChanneling(u.FistsofFury)and(not interruptFoF1 or u.RisingSunKick:CooldownRemains()<=0)and h:AffectingCombat()then if n.Cast(u.PoolEnergy,nil,nil,nil)then a1=99999;return"Casting FoF"end elseif interruptFoF1==true and not h:IsChanneling(u.FistsofFury)then interruptFoF1=false end;if h:IsChanneling(u.FistsofFury)then if h:AffectingCombat()and ae.Windwalker.CastCancelFC and interruptFoF1 then a1=1999 end end;if n.QueuedCast()then a1=n.QueuedCast()return"Custom Queue "..k(a1):ID()end;if U and u.LegSweep:IsUsableP()and u.LegSweep:CooldownRemains(BypassRecovery)<=0 then if n.Cast(u.LegSweep,nil,nil,nil)then a1=119381;return"queue Leg Sweep"end elseif(not u.LegSweep:IsUsableP()or u.LegSweep:CooldownRemains(BypassRecovery)>0)and U then HeroRotationCharDB.Toggles[34]=not HeroRotationCharDB.Toggles[34]n.Print("Leg Sweep Queue is now "..(HeroRotationCharDB.Toggles[34]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if V and u.Paralysis:IsUsableP()and u.Paralysis:CooldownRemains(BypassRecovery)<=0 then if n.Cast(u.Paralysis,nil,nil,nil)then if g("mouseover"):GUID()~=nil and g("mouseover"):IsSpellInRange(u.Paralysis)then a0=1115078;return"queue Paralysis MO"else a1=115078;return"queue Paralysis"end end elseif(not u.Paralysis:IsUsableP()or u.Paralysis:CooldownRemains(BypassRecovery)>0)and V then HeroRotationCharDB.Toggles[35]=not HeroRotationCharDB.Toggles[35]n.Print("Paralysis Queue is now "..(HeroRotationCharDB.Toggles[35]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if W and u.RingOfPeace:IsAvailable()and u.RingOfPeace:IsUsableP()and u.RingOfPeace:CooldownRemains(BypassRecovery)<=0 then if n.Cast(u.RingOfPeace,nil,nil,nil)then a1=116844;return"queue RingOfPeace"end elseif(not u.RingOfPeace:IsUsableP()or u.RingOfPeace:CooldownRemains(BypassRecovery)>0 or not u.RingOfPeace:IsAvailable())and W then HeroRotationCharDB.Toggles[36]=not HeroRotationCharDB.Toggles[36]n.Print("RingOfPeace Queue is now "..(HeroRotationCharDB.Toggles[36]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if X and u.BonedustBrew:IsUsableP()and u.BonedustBrew:CooldownRemains(BypassRecovery)<=0 then if n.Cast(u.BonedustBrew,nil,nil,nil)then a1=325216;return"queue BonedustBrew"end elseif(not u.BonedustBrew:IsUsableP()or u.BonedustBrew:CooldownRemains(BypassRecovery)>0)and X then HeroRotationCharDB.Toggles[37]=not HeroRotationCharDB.Toggles[37]n.Print("BonedustBrew Queue is now "..(HeroRotationCharDB.Toggles[37]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if h:AffectingCombat()then if u.FortifyingBrew:IsReady()and h:HealthPercentage()<ae.Commons.FortifyingBrew then if n.Cast(u.FortifyingBrew,nil,nil,nil)then a1=243435;return"Fortifying Brew 100"end end;if u.TouchOfKarma:IsReady()and h:HealthPercentage()<ae.Commons.TouchofKarma then if n.Cast(u.TouchOfKarma,nil,nil,nil)then a1=122470;return"ToK 100"end end;if h:HealthPercentage()<ae.Commons.HealthstoneHP and v.Healthstone:IsReady()and v.Healthstone:CooldownRemains()<=0 then if n.Cast(v.Healthstone,nil)then a1=40;return"Healthstone HP"end end;if h:HealthPercentage()<ae.Commons.HealPotHP and(v.RefreshingHealingPotion1:IsReady()and v.RefreshingHealingPotion1:CooldownRemains()<=0 or v.RefreshingHealingPotion2:IsReady()and v.RefreshingHealingPotion2:CooldownRemains()<=0 or v.RefreshingHealingPotion3:IsReady()and v.RefreshingHealingPotion3:CooldownRemains()<=0)then if n.Cast(v.RefreshingHealingPotion1,nil)then a1=45;return"RefreshingHealingPotion HP"end end end;if d.CombatTime()<4 and h:Chi()<5 and not u.Serenity:IsAvailable()and(not C or not u.InvokeXuenTheWhiteTiger:IsAvailable())then local ShouldReturn=aS()if ShouldReturn then return ShouldReturn end end;if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BotTrinket then local ShouldReturn=aR()if ShouldReturn then return ShouldReturn end end;if u.JadefireStomp:IsCastable()and(ah(u.JadefireStomp)and u.JadefireHarmony:IsAvailable())then if ac.CastTargetIf(u.JadefireStomp,y,"min",aD,aG,not i:IsInRange(30))then a1=388193;return"jadefire_stomp main 8"end end;if u.BonedustBrew:IsCastable()and(z==1 and i:DebuffDown(u.SkyreachExhaustionDebuff)and(C or u.InvokeXuenTheWhiteTiger:CooldownDown()))then if q(u.BonedustBrew,nil,nil,not i:IsInRange(40))then a1=386276;return"bonedust_brew main 9"end end;if u.TigerPalm:IsReady()and(h:BuffDown(u.SerenityBuff)and h:Energy()>50 and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3 and ah(u.TigerPalm)and h:ChiDeficit()>=2+s(h:BuffUp(u.PowerStrikesBuff))and(not u.InvokeXuenTheWhiteTiger:IsAvailable()and not u.Serenity:IsAvailable()or(not u.Skyreach:IsAvailable()and not u.Skytouch:IsAvailable()or d.CombatTime()>5 or C))and not F and(z>1 or not u.BonedustBrew:IsAvailable()or u.BonedustBrew:IsAvailable()and z==1 and u.BonedustBrew:CooldownDown()))then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm main 10"end end;if u.TigerPalm:IsReady()and(h:BuffDown(u.SerenityBuff)and h:BuffStack(u.TeachingsoftheMonasteryBuff)<3 and ah(u.TigerPalm)and h:ChiDeficit()>=2+s(h:BuffUp(u.PowerStrikesBuff))and(not u.InvokeXuenTheWhiteTiger:IsAvailable()and not u.Serenity:IsAvailable()or(not u.Skyreach:IsAvailable()and not u.Skytouch:IsAvailable()or d.CombatTime()>5 or C))and not F and(z>1 or not u.BonedustBrew:IsAvailable()or u.BonedustBrew:IsAvailable()and z==1 and u.BonedustBrew:CooldownDown()))then if ac.CastTargetIf(u.TigerPalm,x,"min",aA,nil,not i:IsInMeleeRange(5))then a1=100780;return"tiger_palm main 12"end end;if u.ChiBurst:IsCastable()and(u.JadefireStomp:IsAvailable()and u.JadefireStomp:CooldownDown()and(h:ChiDeficit()>=1 and z==1 or h:ChiDeficit()>=2 and z>=2)and not u.JadefireHarmony:IsAvailable())then if q(u.ChiBurst,nil,nil,not i:IsInRange(40))then a1=123986;return"chi_burst main 14"end end;if p()and not u.Serenity:IsAvailable()then local ShouldReturn=aU()if ShouldReturn then return ShouldReturn end end;if p()and u.Serenity:IsAvailable()then local ShouldReturn=aW()if ShouldReturn then return ShouldReturn end end;if h:BuffUp(u.SerenityBuff)then if h:BuffUp(u.SerenityBuff)and(h:BloodlustUp()and(h:BuffUp(u.InvokersDelightBuff)or h:PowerInfusionUp())or h:BuffUp(u.InvokersDelightBuff)and h:PowerInfusionUp())and z>=4 then local ShouldReturn=aX()if ShouldReturn then return ShouldReturn end end;if h:BuffUp(u.SerenityBuff)and(h:BloodlustUp()and(h:BuffUp(u.InvokersDelightBuff)or h:PowerInfusionUp())or h:BuffUp(u.InvokersDelightBuff)and h:PowerInfusionUp())and z<4 then local ShouldReturn=aY()if ShouldReturn then return ShouldReturn end end;if z>4 then local ShouldReturn=aZ()if ShouldReturn then return ShouldReturn end end;if z==4 then local ShouldReturn=a_()if ShouldReturn then return ShouldReturn end end;if z==3 then local ShouldReturn=b0()if ShouldReturn then return ShouldReturn end end;if z==2 then local ShouldReturn=b1()if ShouldReturn then return ShouldReturn end end;if z==1 then local ShouldReturn=b2()if ShouldReturn then return ShouldReturn end end end;if z>4 then local ShouldReturn=b3()if ShouldReturn then return ShouldReturn end end;if z==4 then local ShouldReturn=b4()if ShouldReturn then return ShouldReturn end end;if z==3 then local ShouldReturn=b5()if ShouldReturn then return ShouldReturn end end;if z==2 then local ShouldReturn=b6()if ShouldReturn then return ShouldReturn end end;if z==1 then local ShouldReturn=b7()if ShouldReturn then return ShouldReturn end end;if u.SummonWhiteTigerStatue:IsCastable()then if q(u.SummonWhiteTigerStatue,nil,nil,not i:IsInRange(40))then a1=388686;return"summon_white_tiger_statue main 16"end end;local ShouldReturn=b8()if ShouldReturn then return ShouldReturn end;if q(u.PoolEnergy)then return"Pool Energy"end end end;local function bm()n.Print("Windwalker Monk rotation has been updated for patch 10.2.5.")end;n.SetAPL(269,bk,bm)function ReturnSpell()if a1==0 then return 0 else return a1 end end;function ReturnSpellMO()if a0==0 then return 0 else return a0 end end;function ReturnSpellFocus()if a3==0 then return 0 else return a3 end end