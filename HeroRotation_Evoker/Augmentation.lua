local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.AoEON;local n=l.CDsON;local o=l.Cast;local p=l.CastPooling;local q=l.CastAnnotated;local r=l.CastSuggested;local s=l.Commons.Evoker;local t=l.Commons.Everyone.num;local u=l.Commons.Everyone.bool;local v=math.max;local w=math.min;local x=0;local y=0;local z=0;local A=0;local B=j.Evoker.Augmentation;local C=k.Evoker.Augmentation;local D={C.AshesoftheEmbersoul:ID(),C.BalefireBranch:ID(),C.BeacontotheBeyond:ID(),C.BelorrelostheSuncaller:ID(),C.IrideusFragment:ID(),C.MirrorofFracturedTomorrows:ID(),C.NymuesUnravelingSpindle:ID(),C.SpoilsofNeltharus:ID()}local E=g:GetEquipment()local F=E[13]and k(E[13])or k(0)local G=E[14]and k(E[14])or k(0)local H=l.Commons.Everyone;local I={General=l.GUISettings.General,Commons=l.GUISettings.APL.Evoker.Commons,Augmentation=l.GUISettings.APL.Evoker.Augmentation}local function t(J)if J then return 1 else return 0 end end;local function u(J)return J~=0 end;local K={}local L=B.FontofMagic:IsAvailable()and 4 or 3;local M=B.FontofMagic:IsAvailable()and 0.8 or 1;local N=11111;local O=11111;local P=g:GCD()+0.25;local Q=2;local R,S;local T,U;local V=true;local W=I.Augmentation.MinOpenerDelay;local X=0;local Y=false;local Z=HeroRotationCharDB.Toggles[4]local _=HeroRotationCharDB.Toggles[5]local a0=not HeroRotationCharDB.Toggles[15]local a1=HeroRotationCharDB.Toggles[191]local a2=HeroRotationCharDB.Toggles[192]local a3=HeroRotationCharDB.Toggles[3]local a4;local a5=WeakAuras.GetRegion('PT: List').PreList;local a6=a5['party1']local a7=a5['party2']local a8=a5['party3']local a9=a5['party4']local aa=a5['player']local ab=GetNumGroupMembers()local ac=UnitExists("party1")and f("party1"):HealthPercentage()<=I.Augmentation.EBThreshold;local ad=UnitExists("party2")and f("party2"):HealthPercentage()<=I.Augmentation.EBThreshold;local ae=UnitExists("party3")and f("party3"):HealthPercentage()<=I.Augmentation.EBThreshold;local af=UnitExists("party4")and f("party4"):HealthPercentage()<=I.Augmentation.EBThreshold;local ag=UnitExists("player")and f("player"):HealthPercentage()<=I.Augmentation.EBThreshold;local ah={102560,359844,191427,288613,12472,365350,190319,375087,10060,391109,152279,47568,384376,51271,212283,393961,383883,383882}local ai=l.Common.Everyone;local function aj(ak)local al=false;for am=1,25 do local an,ao,ao,ao,ao,ap,aq,ao,ao,ar=UnitAura(ak,am)if an~=nil and ap>0 then local as=ap-GetTime()if as>6 and ar==410089 and aq=='player'then al=true;break end end end;return al end;local function at(ak)local au=false;for av=1,25 do local an,ao,ao,ao,ao,ao,ao,ao,ao,ar=UnitAura(ak,av)if an~=nil and tContains(ah,ar)then au=true;break end end;return au end;local function aw(ax)local ay=0;local az=GetNumGroupMembers()if az>0 and az<6 then for aA=1,az do local ak='party'..aA;if f(ak):HealthPercentage()<=ax then ay=aA end end end;return ay end;local function aB()local ay=0;local aC="DAMAGER"a6=a5['party1']a7=a5['party2']a8=a5['party3']a9=a5['party4']aa=a5['player']ab=GetNumGroupMembers()if ab>0 and ab<6 then for aA=1,ab do local ak='party'..aA;local aD=false;local aE=false;local aF=IsSpellInRange(B.Prescience:Name(),ak)local aG=UnitGroupRolesAssigned(ak)if UnitExists(ak)and UnitIsDeadOrGhost(ak)~=true and aF==1 then if ak=="party1"and a6 and aG==aC or ak=="party2"and a7 and aG==aC or ak=="party3"and a8 and aG==aC or ak=="party4"and a9 and aG==aC then local al=false;local au=false;au=at(ak)al=aj(ak)if not al and au then ay=aA;break end;aD=true end;if ak=="party1"and a6 and aG==aC or ak=="party2"and a7 and aG==aC or ak=="party3"and a8 and aG==aC or ak=="party4"and a9 and aG==aC then local al=false;al=at(ak)if not al then ay=aA;break end;aE=true else if aG=="TANK"and aD and aE and not I.Augmentation.PresRaid then local al=false;al=aj(ak)if not al then ay=aA;break end end end end end end;return ay end;local function aH()local ay=0;local az=GetNumGroupMembers()if az>0 and az<6 then for aA=1,az do local ak='party'..aA;local aG=UnitGroupRolesAssigned(ak)if aG=="HEALER"then ay=aA end end end;return ay end;local aI={{B.TailSwipe,"Cast Tail Swipe (Interrupt)",function()return true end},{B.WingBuffet,"Cast Wing Buffet (Interrupt)",function()return true end}}d:RegisterForEvent(function()N=11111;O=11111 end,"PLAYER_REGEN_ENABLED")d:RegisterForEvent(function()E=g:GetEquipment()F=E[13]and k(E[13])or k(0)G=E[14]and k(E[14])or k(0)end,"PLAYER_EQUIPMENT_CHANGED")d:RegisterForEvent(function()L=B.FontofMagic:IsAvailable()and 4 or 3;M=B.FontofMagic:IsAvailable()and 0.8 or 1 end,"SPELLS_CHANGED","LEARNED_SPELL_IN_TAB")local function aJ()local aK;if UnitInRaid("player")then aK=f.Raid elseif UnitInParty("player")then aK=f.Party else return false end;local aL=nil;for ao,aM in pairs(aK)do if aM:Exists()and aM:BuffUp(B.SourceofMagicBuff)then aL=aM end end;if aL==nil then return true end;return false end;local function aN()local ay=0;local ab=GetNumGroupMembers()if ab>0 and ab<6 then for aA=1,ab do local ak='party'..aA;local aO=IsSpellInRange(B.BlisteringScales:Name(),ak)local aG=UnitGroupRolesAssigned(ak)if UnitExists(ak)and UnitIsDeadOrGhost(ak)~=true and aO==1 and aG=="TANK"then local aP=false;for am=1,25 do local an,ao,aQ,ao,ao,ao,ao,ao,ao,ar=UnitAura(ak,am)if ar==360827 and aQ>2 then aP=true;break end end;if not aP then ay=aA;break end end end end;return ay end;local function aR()local aK;if UnitInRaid("player")then aK=f.Raid elseif UnitInParty("player")then aK=f.Party else aK=g end;if aK==g then return g:BuffStack(B.BlisteringScalesBuff)else for aS,aM in pairs(aK)do if aM:Exists()and(aM:IsTankingAoE(8)or aM:IsTanking(h))and UnitGroupRolesAssigned(aS)=="TANK"then return aM:BuffStack(B.BlisteringScalesBuff)end end end;return 0 end;local function aT(aU)local aV=0;for ao,aW in pairs(aU)do local aX=aW:DebuffRemains(B.TemporalWoundDebuff)aV=v(aX,aV)end;return aV end;local function aY()return B.EbonMightSelfBuff:BaseDuration()*(1+g:CritChancePct()/100)end;local function aZ()local aK;local a_=0;if UnitInRaid("player")then aK=f.Raid elseif UnitInParty("player")then aK=f.Party else return 0 end;for ao,aW in pairs(aK)do if aW:Exists()then a_=a_+1 end end;return a_ end;local function b0()V=true;W=I.Augmentation.MinOpenerDelay;if not B.InterwovenThreads:IsAvailable()then X=W else X=W+(X or 0)end;Y=false;local b1=F:ID()R=b1==C.IrideusFragment:ID()or b1==C.BalefireBranch:ID()or b1==C.AshesoftheEmbersoul:ID()or b1==C.NymuesUnravelingSpindle:ID()or b1==C.MirrorofFracturedTomorrows:ID()or b1==C.SpoilsofNeltharus:ID()local b2=G:ID()S=b2==C.IrideusFragment:ID()or b2==C.BalefireBranch:ID()or b2==C.AshesoftheEmbersoul:ID()or b2==C.NymuesUnravelingSpindle:ID()or b2==C.MirrorofFracturedTomorrows:ID()or b2==C.SpoilsofNeltharus:ID()T=R or b1==C.BeacontotheBeyond:ID()or b1==C.BelorrelostheSuncaller:ID()U=S or b2==C.BeacontotheBeyond:ID()or b2==C.BelorrelostheSuncaller:ID()if B.BlessingoftheBronze:IsCastable()and H.GroupBuffMissing(B.BlessingoftheBronzeBuff)then if o(B.BlessingoftheBronze,nil)then x=364342;return"blessing_of_the_bronze precombat"end end;if B.SourceofMagic:IsCastable()and aJ()and aH()~=0 then if o(B.SourceofMagic)then x=369459;A=aH()return"source_of_magic precombat"end end;if B.BlackAttunement:IsCastable()and g:BuffDown(B.BlackAttunementBuff)then if o(B.BlackAttunement)then x=403264;return"black_attunement precombat"end end;if B.BronzeAttunement:IsCastable()and(g:BuffDown(B.BronzeAttunementBuff)and g:BuffUp(B.BlackAttunementBuff)and not g:BuffUp(B.BlackAttunementBuff,false))then if o(B.BronzeAttunement)then x=403265;return"bronze_attunement precombat"end end;if B.BlisteringScales:IsCastable()and aR()<10 then if o(B.BlisteringScales,nil,nil)then x=360827;A=aN()return"blistering_scales precombat 2"end end;if B.LivingFlame:IsCastable()then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame precombat 10"end end end;local function b3()if B.EbonMight:IsReady()then if o(B.EbonMight,nil)then x=395152;return"ebon_might ebon_logic 2"end end end;local function b4()if not Y then X=w(X,W)end;X=X-1;if not Y then Y=true end;if C.NymuesUnravelingSpindle:IsEquippedAndReady()then X=X-2 end;if B.LivingFlame:IsReady()and(EnemiesCount8ySplash==1 or B.PupilofAlexstrasza:IsAvailable())then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame opener_filler 4"end end;if B.AzureStrike:IsCastable()then if o(B.AzureStrike,nil,nil,not h:IsSpellInRange(B.AzureStrike))then x=362969;return"azure_strike opener_filler 6"end end end;local function b5()if I.Commons.Enabled.TopTrinket or I.Commons.Enabled.BottomTrinket then if C.NymuesUnravelingSpindle:IsEquippedAndReady()and B.BreathofEons:CooldownRemains()<=3 then if C.NymuesUnravelingSpindle:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket NymuesUnravelingSpindle"elseif C.NymuesUnravelingSpindle:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket NymuesUnravelingSpindle"end end;if h:DebuffUp(B.TemporalWoundDebuff)or O<=30 and g:BuffUp(B.EbonMightSelfBuff)then if C.IrideusFragment:IsEquippedAndReady()then if C.IrideusFragment:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket IrideusFragment"elseif C.IrideusFragment:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket IrideusFragment"end end;if C.AshesoftheEmbersoul:IsEquippedAndReady()then if C.AshesoftheEmbersoul:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket AshesoftheEmbersoul"elseif C.AshesoftheEmbersoul:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket AshesoftheEmbersoul"end end;if C.MirrorofFracturedTomorrows:IsEquippedAndReady()then if C.MirrorofFracturedTomorrows:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket MirrorofFracturedTomorrows"elseif C.MirrorofFracturedTomorrows:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket MirrorofFracturedTomorrows"end end;if C.BalefireBranch:IsEquippedAndReady()then if C.BalefireBranch:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket BalefireBranch"elseif C.BalefireBranch:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket BalefireBranch"end end end;if C.SpoilsofNeltharus:IsEquippedAndReady()and(g:BuffUp(B.SpoilsofNeltharusMastery)and(not((F:ID()==C.IrideusFragment:ID()or F:ID()==C.MirrorofFracturedTomorrows:ID())and F:CooldownUp()or(G:ID()==C.IrideusFragment:ID()or G:ID()==C.MirrorofFracturedTomorrows:ID())and G:CooldownUp())or not(d.CombatTime()%120<=20 or O>=190 and O<=250 and d.CombatTime()%60<=25 or O<=25)))then if C.SpoilsofNeltharus:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket SpoilsofNeltharus"elseif C.SpoilsofNeltharus:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket SpoilsofNeltharus"end end;if C.BeacontotheBeyond:IsEquippedAndReady()and(h:DebuffDown(B.TemporalWoundDebuff)and((F:CooldownRemains()>=20 or not R)and(G:CooldownRemains()>=20 or not S))or R and S or O<20)then if C.BeacontotheBeyond:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket BeacontotheBeyond"elseif C.BeacontotheBeyond:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket BeacontotheBeyond"end end;if C.BelorrelostheSuncaller:IsEquippedAndReady()and(h:DebuffDown(B.TemporalWoundDebuff)and((F:CooldownRemains()>=20 or not R)and(G:CooldownRemains()>=20 or not S))or R and S or O<20)then if C.BelorrelostheSuncaller:ID()==TopTrinketID and I.Commons.Enabled.TopTrinket then x=13;return"top trinket BelorrelostheSuncaller"elseif C.BelorrelostheSuncaller:ID()==BotTrinketID and I.Commons.Enabled.BottomTrinket then x=14;return"bot trinket BelorrelostheSuncaller"end end;local b6=g:GetUseableTrinkets(D)if b6 and n()and(h:DebuffDown(B.TemporalWoundDebuff)and(B.BreathofEons:CooldownRemains()>=30 or not S)and not T)then if b6 then if l.Cast(b6,nil,nil)then if b6:ID()==GetInventoryItemID("player",13)and I.Commons.Enabled.TopTrinket then x=13;return"Generic use_items for "..b6:Name()elseif b6:ID()==GetInventoryItemID("player",14)and I.Commons.Enabled.BottomTrinket then x=14;return"Generic use_items for "..b6:Name()end end end end end end;local function b7()local b8=ai.UnitDebuffCheck("Poison")if b8~=0 then if B.Expunge:IsReady()then if o(B.Expunge,nil)then x=365585;A=b8;return"Expunge Dispell "end end end end;local function b9()local b8=ai.UnitDebuffCheckWith2Debuffz("Disease","Curse")if b8~=0 then if B.CauterizingFlame:IsReady()then if o(B.CauterizingFlame,nil)then x=374251;A=b8;return"Cauterizing Flame Dispell"end end end end;local function ba()if n()and B.TipTheScales:IsCastable()and(B.FireBreath:CooldownUp()and g:BuffUp(B.EbonMightSelfBuff))then if o(B.TipTheScales,nil)then x=370553;return"tip_the_scales fb 2"end end;local bb=0;if B.FireBreath:IsCastable()then if g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>16 then bb=1 elseif g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>12 then bb=2 elseif g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>8 then bb=3 elseif g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>4 then bb=4 elseif g:BuffUp(B.TipTheScales)and not C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>8 then bb=3 elseif g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and not C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>16 then bb=1 elseif g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and not C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>12 then bb=2 elseif g:BuffRemains(B.EbonMightSelfBuff)>B.FireBreath:ExecuteTime()and not C.NeltharionsCalltoChaos:IsEquipped()and h:TimeToDie()>8 then bb=3 end;if bb>0 then if q(B.FireBreath,false,bb,not h:IsInRange(25))then x=357208;if true then z=bb;return"EmpowerShouldcast = "..z end;return"fire_breath empower_to="..bb.." fb 4"end end end end;local function bc()if B.LivingFlame:IsReady()and((g:BuffUp(B.AncientFlameBuff)or g:Mana()>=200000 or not B.DreamofSpring:IsAvailable()or V==0)and(EnemiesCount8ySplash==1 or B.PupilofAlexstrasza:IsAvailable()))then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame filler 2"end end;if B.AzureStrike:IsCastable()then if o(B.AzureStrike,nil,nil,not h:IsSpellInRange(B.AzureStrike))then x=362969;return"azure_strike filler 4"end end end;local function bd()Z=HeroRotationCharDB.Toggles[4]_=HeroRotationCharDB.Toggles[5]a0=not HeroRotationCharDB.Toggles[15]a2=HeroRotationCharDB.Toggles[192]a1=HeroRotationCharDB.Toggles[191]end;local function be()Enemies25y=g:GetEnemiesInRange(25)Enemies8ySplash=h:GetEnemiesInSplashRange(8)if m()then EnemiesCount8ySplash=h:GetEnemiesInSplashRangeCount(8)else EnemiesCount8ySplash=1 end;if not a3 then y=0;x=0 end;if y>0 then y=0 end;if x>0 then x=0 end;if z>0 then z=0 end;if A>0 then A=0 end;local a4=bd()if l.QueuedCast()then x=l.QueuedCast()return"Custom Queue "..j(x):ID()end;if a2 and B.LandSlide:IsUsableP()and B.LandSlide:CooldownRemains(BypassRecovery)==0 then if l.Cast(B.LandSlide,nil,nil,nil)then x=358385;return"queue LandSlide"end elseif(not B.LandSlide:IsUsableP()or B.LandSlide:CooldownRemains()>0)and a2 then HeroRotationCharDB.Toggles[192]=not HeroRotationCharDB.Toggles[192]l.Print("LandSlide Queue is now "..(HeroRotationCharDB.Toggles[192]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if not a1 then b7()b9()end;if B.RenewingBlaze:IsReady()and g:HealthPercentage()<=I.Augmentation.RBThreshold then if o(B.RenewingBlaze,nil)then x=374348;return"Selfheal Renewing Blaze"end end;if B.EmeraldBlossom:IsReady()and(ac or ad or ae or af or ag)then if o(B.EmeraldBlossom,nil)then x=355913;A=aw(I.Augmentation.EBThreshold)return"emerald_blossom heal defensive"end end;if B.VerdantEmbrace:IsReady()and(ac or ad or ae or af or ag)then if o(B.VerdantEmbrace,nil)then x=360995;A=aw(I.Augmentation.VEThreshold)return"verdant_embrace heal defensive"end end;if H.TargetIsValid()or g:AffectingCombat()then N=d.BossFightRemains()O=N;if O==11111 then O=d.FightRemains(Enemies25y,false)end;P=g:GCD()+0.25 end;if H.TargetIsValid()and(g:AffectingCombat()or _)then if not g:AffectingCombat()and not g:IsCasting()then local a4=b0()if a4 then return a4 end end;local a4=H.Interrupt(25,B.Quell,nil,aI)if a4 then return a4 end;local W=I.Augmentation.MinOpenerDelay;if B.Unravel:IsReady()then if o(B.Unravel,nil,nil,not h:IsSpellInRange(B.Unravel))then x=368432;return"unravel main 2"end end;VarTempWound=aT(Enemies25y)if B.Prescience:IsCastable()and((B.Prescience:FullRechargeTime()<=P*3 or B.EbonMight:CooldownRemains()<=P*3 and g:BuffRemains(B.EbonMightSelfBuff)-P*3<=aY()*0.4 or VarTempWound>=P+B.Eruption:CastTime()or O<=30)and g:BuffStack(B.TremblingEarthBuff)+B.PrescienceBuff:AuraActiveCount()<=5+t(B.Prescience:FullRechargeTime()<=P*3))then if o(B.Prescience,nil,nil)then x=409311;A=aB()return"prescience main 4"end end;if g:BuffRemains(B.EbonMightSelfBuff)-B.EbonMight:CastTime()<=aY()*0.4 and(B.PrescienceBuff:AuraActiveCount()>=2 and d.CombatTime()<=10 or B.PrescienceBuff:AuraActiveCount()>=3 or g:BuffRemains(B.EbonMightSelfBuff)>=B.EbonMight:CastTime()or aZ()<=2)then local a4=b3()if a4 then return a4 end end;if X>0 and d.CombatTime()<X then local a4=b4()if a4 then return a4 end;if q(B.Pool,false,"WAIT")then return"Wait for OpenerFiller()"end end;if I.Commons.Enabled.Trinkets or I.Commons.Enabled.Items then local a4=b5()if a4 then return a4 end end;if B.DeepBreath:IsCastable()then if o(B.DeepBreath,nil,nil,not h:IsInRange(50))then x=357210;return"deep_breath main 8"end end;if B.TimeSkip:IsAvailable()and B.TimeSkip:CooldownUp()and not B.InterwovenThreads:IsAvailable()then local a4=ba()if a4 then return a4 end end;if B.Upheaval:IsCastable()and(g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(1)and B.TimeSkip:IsAvailable()and B.TimeSkip:CooldownUp()and not B.InterwovenThreads:IsAvailable())then if q(B.Upheaval,false,"1",not h:IsInRange(25),nil)then x=396286;if true then z=1 end;return"upheaval empower_to=1 main 10"end end;if n()and B.BreathofEons:IsCastable()and B.BreathofEons:TimeSinceLastCast()>=117 and((B.EbonMight:CooldownRemains()<=4 or g:BuffUp(B.EbonMightSelfBuff))and h:TimeToDie()>15 and(not C.NymuesUnravelingSpindle:IsEquipped()or C.NymuesUnravelingSpindle:CooldownRemains()>=10 or O<30)or O<30)then if o(B.BreathofEons,nil,nil,not h:IsInRange(50))then x=403631;return"breath_of_eons main 12"end end;if B.LivingFlame:IsReady()and(g:BuffUp(B.LeapingFlamesBuff)and B.FireBreathDebuff:CooldownUp())then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame main 14"end end;local a4=ba()if a4 then return a4 end;if B.Upheaval:IsCastable()and g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(1)then if q(B.Upheaval,false,"1",not h:IsInRange(25),nil)then x=396286;if true then z=1 end;return"upheaval empower_to=1 main 16"end end;if n()and B.TimeSkip:IsCastable()and B.FireBreath:CooldownRemains()+B.Upheaval:CooldownRemains()+B.Prescience:FullRechargeTime()>35 then if o(B.TimeSkip,nil)then x=374968;return"time_skip main 18"end end;if B.EmeraldBlossom:IsReady()and(B.DreamofSpring:IsAvailable()and g:BuffUp(B.EssenceBurstBuff)and(V==2 or V==1 and g:BuffDown(B.AncientFlameBuff))and(g:BuffUp(B.EbonMightSelfBuff)or g:EssenceDeficit()==0 or g:BuffStack(B.EssenceBurstBuff)==Q and B.EbonMight:CooldownRemains()>4))and(ac or ad or ae or af)then if o(B.EmeraldBlossom,nil)then x=355913;A=aw(I.Augmentation.EBThreshold)return"emerald_blossom main 20"end end;if B.Eruption:IsReady()and(g:BuffRemains(B.EbonMightSelfBuff)>B.Eruption:ExecuteTime()or g:EssenceDeficit()==0 or g:BuffStack(B.EssenceBurstBuff)==Q and B.EbonMight:CooldownRemains()>4)then if o(B.Eruption,nil,nil,not h:IsInRange(25))then x=395160;return"eruption main 22"end end;if B.BlisteringScales:IsCastable()and(aR()==0 and g:BuffDown(B.EbonMightSelfBuff))then if o(B.BlisteringScales,nil,nil)then x=360827;A=aN()return"blistering_scales main 24"end end;if B.EmeraldBlossom:IsReady()and(g:BuffDown(B.EbonMightSelfBuff)and B.AncientFlame:IsAvailable()and B.ScarletAdaptation:IsAvailable()and not B.DreamofSpring:IsAvailable()and g:BuffDown(B.AncientFlameBuff)and EnemiesCount8ySplash==1)and(ac or ad or ae or af or ag)then if o(B.EmeraldBlossom,nil)then x=355913;A=aw(I.Augmentation.EBThreshold)return"emerald_blossom main 26"end end;if B.VerdantEmbrace:IsReady()and(g:BuffDown(B.EbonMightSelfBuff)and B.AncientFlame:IsAvailable()and B.ScarletAdaptation:IsAvailable()and g:BuffDown(B.AncientFlameBuff)and(not B.DreamofSpring:IsAvailable()or g:Mana()>=200000)and EnemiesCount8ySplash==1)and(ac or ad or ae or af)then if o(B.VerdantEmbrace,nil)then x=360995;A=aw(I.Augmentation.VEThreshold)return"verdant_embrace main 28"end end;local a4=bc()if a4 then return a4 end;if q(B.Pool,false,"WAIT")then return"Wait/Pool"end end end;function ReturnSpell1()if x==0 then return 0 else return x end end;function ReturnSpell()if x==0 then return 0 else return x end end;function ReturnSpellMO()if y==0 then return 0 else return y end end;function ReturnSpellEP()if z==0 then return 0 else return z end end;function ReturnSpellT()if A==0 then return 0 else return A end end;local function bf()B.PrescienceBuff:RegisterAuraTracking()l.Print("Augmentation Evoker rotation has been updated for patch 10.2.0.")end;l.SetAPL(1473,be,bf)