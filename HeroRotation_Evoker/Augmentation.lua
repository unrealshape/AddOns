local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.AoEON;local n=l.CDsON;local o=l.Cast;local p=l.CastPooling;local q=l.CastAnnotated;local r=l.CastSuggested;local s=l.Commons.Evoker;local t=l.Commons.Everyone.num;local u=l.Commons.Everyone.bool;local v=math.max;local w=math.min;local x=0;local y=0;local z=0;local A=0;local B=j.Evoker.Augmentation;local C=k.Evoker.Augmentation;local D={C.AshesoftheEmbersoul:ID(),C.BalefireBranch:ID(),C.BeacontotheBeyond:ID(),C.BelorrelostheSuncaller:ID(),C.IrideusFragment:ID(),C.MirrorofFracturedTomorrows:ID(),C.NymuesUnravelingSpindle:ID(),C.SpoilsofNeltharus:ID()}local E=g:GetEquipment()local F=E[13]and k(E[13])or k(0)local G=E[14]and k(E[14])or k(0)local H=F:ID()local I=F:OnUseSpell()local J=I and I.MaximumRange>0 and I.MaximumRange<=100 and I.MaximumRange or 100;local K=G:ID()local L=G:OnUseSpell()local M=L and L.MaximumRange>0 and L.MaximumRange<=100 and L.MaximumRange or 100;local N=H==C.RubyWhelpShell:ID()or H==C.WhisperingIncarnateIcon:ID()local O=K==C.RubyWhelpShell:ID()or K==C.WhisperingIncarnateIcon:ID()local P=H==C.NymuesUnravelingSpindle:ID()local Q=K==C.NymuesUnravelingSpindle:ID()local R=H==C.BeacontotheBeyond:ID()or H==C.BelorrelostheSuncaller:ID()local S=K==C.BeacontotheBeyond:ID()or K==C.BelorrelostheSuncaller:ID()local T=F:HasUseBuff()and not N;local U=G:HasUseBuff()and not O;local V=T and F:Cooldown()%120==0 and 1 or 0.5;local W=U and G:Cooldown()%120==0 and 1 or 0.5;local X=2;local Y=2;local Z=l.Commons.Everyone;local _={General=l.GUISettings.General,Commons=l.GUISettings.APL.Evoker.Commons,Augmentation=l.GUISettings.APL.Evoker.Augmentation}local function t(a0)if a0 then return 1 else return 0 end end;local function u(a0)return a0~=0 end;local a1={}local a2=B.FontofMagic:IsAvailable()and 4 or 3;local a3=B.FontofMagic:IsAvailable()and 0.8 or 1;local a4=11111;local a5=11111;local a6=g:GCD()+0.25;local a7=2;local N,O;local P,Q;local a8=true;local a9=_.Augmentation.MinOpenerDelay;local aa=0;local ab=false;local ac;local ad=HeroRotationCharDB.Toggles[4]local ae=HeroRotationCharDB.Toggles[5]local af=not HeroRotationCharDB.Toggles[15]local ag=HeroRotationCharDB.Toggles[191]local ah=HeroRotationCharDB.Toggles[192]local ai=HeroRotationCharDB.Toggles[3]local aj;local ak=WeakAuras.GetRegion('PT: List').PreList;local al=ak['party1']local am=ak['party2']local an=ak['party3']local ao=ak['party4']local ap=ak['player']local aq=GetNumGroupMembers()local ar=UnitExists("party1")and f("party1"):HealthPercentage()<=_.Augmentation.EBThreshold;local as=UnitExists("party2")and f("party2"):HealthPercentage()<=_.Augmentation.EBThreshold;local at=UnitExists("party3")and f("party3"):HealthPercentage()<=_.Augmentation.EBThreshold;local au=UnitExists("party4")and f("party4"):HealthPercentage()<=_.Augmentation.EBThreshold;local av=UnitExists("player")and f("player"):HealthPercentage()<=_.Augmentation.EBThreshold;local aw={102560,359844,191427,288613,12472,365350,190319,375087,10060,391109,152279,47568,384376,51271,212283,393961,383883,383882}local ax=l.Common.Everyone;local function ay(az)local aA=false;for aB=1,25 do local aC,aD,aD,aD,aD,aE,aF,aD,aD,aG=UnitAura(az,aB)if aC~=nil and aE>0 then local aH=aE-GetTime()if aH>6 and aG==410089 and aF=='player'then aA=true;break end end end;return aA end;local function aI(az)local aJ=false;for aK=1,25 do local aC,aD,aD,aD,aD,aD,aD,aD,aD,aG=UnitAura(az,aK)if aC~=nil and tContains(aw,aG)then aJ=true;break end end;return aJ end;local function aL(aM)local aN=0;local aO=GetNumGroupMembers()if aO>0 and aO<6 then for aP=1,aO do local az='party'..aP;if f(az):HealthPercentage()<=aM then aN=aP end end end;return aN end;local function aQ()local aN=0;local aR="DAMAGER"al=ak['party1']am=ak['party2']an=ak['party3']ao=ak['party4']ap=ak['player']aq=GetNumGroupMembers()if aq>0 and aq<6 then for aP=1,aq do local az='party'..aP;local aS=false;local aT=false;local aU=IsSpellInRange(B.Prescience:Name(),az)local aV=UnitGroupRolesAssigned(az)if UnitExists(az)and UnitIsDeadOrGhost(az)~=true and aU==1 then if az=="party1"and al and aV==aR or az=="party2"and am and aV==aR or az=="party3"and an and aV==aR or az=="party4"and ao and aV==aR then local aA=false;local aJ=false;aJ=aI(az)aA=ay(az)if not aA and aJ then aN=aP;break end;aS=true end;if az=="party1"and al and aV==aR or az=="party2"and am and aV==aR or az=="party3"and an and aV==aR or az=="party4"and ao and aV==aR then local aA=false;aA=aI(az)if not aA then aN=aP;break end;aT=true else if aV=="TANK"and aS and aT and not _.Augmentation.PresRaid then local aA=false;aA=ay(az)if not aA then aN=aP;break end end end end end end;return aN end;local function aW()local aN=0;local aO=GetNumGroupMembers()if aO>0 and aO<6 then for aP=1,aO do local az='party'..aP;local aV=UnitGroupRolesAssigned(az)if aV=="HEALER"then aN=aP end end end;return aN end;local aX={{B.TailSwipe,"Cast Tail Swipe (Interrupt)",function()return true end},{B.WingBuffet,"Cast Wing Buffet (Interrupt)",function()return true end}}d:RegisterForEvent(function()a4=11111;a5=11111 end,"PLAYER_REGEN_ENABLED")d:RegisterForEvent(function()E=g:GetEquipment()F=E[13]and k(E[13])or k(0)G=E[14]and k(E[14])or k(0)H=F:ID()I=F:OnUseSpell()J=I and I.MaximumRange>0 and I.MaximumRange<=100 and I.MaximumRange or 100;K=G:ID()L=G:OnUseSpell()M=L and L.MaximumRange>0 and L.MaximumRange<=100 and L.MaximumRange or 100;N=H==C.RubyWhelpShell:ID()or H==C.WhisperingIncarnateIcon:ID()O=K==C.RubyWhelpShell:ID()or K==C.WhisperingIncarnateIcon:ID()P=H==C.NymuesUnravelingSpindle:ID()Q=K==C.NymuesUnravelingSpindle:ID()R=H==C.BeacontotheBeyond:ID()or H==C.BelorrelostheSuncaller:ID()S=K==C.BeacontotheBeyond:ID()or K==C.BelorrelostheSuncaller:ID()T=F:HasUseBuff()and not N;U=G:HasUseBuff()and not O;V=T and F:Cooldown()%120==0 and 1 or 0.5;W=U and G:Cooldown()%120==0 and 1 or 0.5;X=2;Y=2 end,"PLAYER_EQUIPMENT_CHANGED")d:RegisterForEvent(function()a2=B.FontofMagic:IsAvailable()and 4 or 3;a3=B.FontofMagic:IsAvailable()and 0.8 or 1 end,"SPELLS_CHANGED","LEARNED_SPELL_IN_TAB")local function aY()local aZ;if UnitInRaid("player")then aZ=f.Raid elseif UnitInParty("player")then aZ=f.Party else return false end;local a_=nil;for aD,b0 in pairs(aZ)do if b0:Exists()and b0:BuffUp(B.SourceofMagicBuff)then a_=b0 end end;if a_==nil then return true end;return false end;local function b1()local aN=0;local aq=GetNumGroupMembers()if aq>0 and aq<6 then for aP=1,aq do local az='party'..aP;local b2=IsSpellInRange(B.BlisteringScales:Name(),az)local aV=UnitGroupRolesAssigned(az)if UnitExists(az)and UnitIsDeadOrGhost(az)~=true and b2==1 and aV=="TANK"then local b3=false;for aB=1,25 do local aC,aD,b4,aD,aD,aD,aD,aD,aD,aG=UnitAura(az,aB)if aG==360827 and b4>2 then b3=true;break end end;if not b3 then aN=aP;break end end end end;return aN end;local function b5()if not _.Augmentation.ShowBlisteringScales then return 99 end;local aZ;if UnitInRaid("player")then aZ=f.Raid elseif UnitInParty("player")then aZ=f.Party else return g:BuffStack(B.BlisteringScalesBuff)end;if aZ==f.Party then for b6,b0 in pairs(aZ)do if b0:Exists()and UnitGroupRolesAssigned(b6)=="TANK"then return b0:BuffStack(B.BlisteringScalesBuff)end end elseif aZ==f.Raid then for b6,b0 in pairs(aZ)do if b0:Exists()and(b0:IsTankingAoE(8)or b0:IsTanking(h))and UnitGroupRolesAssigned(b6)=="TANK"then return b0:BuffStack(B.BlisteringScalesBuff)end end end;return 99 end;local function b7()if not _.Augmentation.ShowPrescience then return false end;local aZ;if UnitInRaid("player")then return true elseif UnitInParty("player")then local b8=nil;local b9=nil;local ba=nil;local bb=B.Prescience:Cooldown()for b6,b0 in pairs(f.Party)do if b0:Exists()then local bc=UnitGroupRolesAssigned(b6)if bc=="DAMAGER"then if b8==nil then b8=b0:BuffRemains(B.PrescienceBuff)else b9=b0:BuffRemains(B.PrescienceBuff)end end;if bc=="TANK"then ba=b0:BuffRemains(B.PrescienceBuff)end end end;if b8==0 or b9==0 or g:HasTier(31,2)and b8>bb and b9>bb and ba==0 then return true end;return false else return false end end;local function bd(be)local bf=0;for aD,bg in pairs(be)do local bh=bg:DebuffRemains(B.TemporalWoundDebuff)bf=v(bh,bf)end;return bf end;local function bi()return B.EbonMightSelfBuff:BaseDuration()*(1+g:CritChancePct()/100)end;local function bj()local aZ;local bk=0;if UnitInRaid("player")then aZ=f.Raid elseif UnitInParty("player")then aZ=f.Party else return 0 end;for aD,bg in pairs(aZ)do if bg:Exists()then bk=bk+1 end end;return bk end;local function bl()a8=true;a9=_.Augmentation.MinOpenerDelay;if not B.InterwovenThreads:IsAvailable()then aa=a9 else aa=a9+(aa or 0)end;ab=false;if B.BlessingoftheBronze:IsCastable()and Z.GroupBuffMissing(B.BlessingoftheBronzeBuff)then if o(B.BlessingoftheBronze,nil)then x=364342;return"blessing_of_the_bronze precombat"end end;if B.SourceofMagic:IsCastable()and aY()and aW()~=0 then if o(B.SourceofMagic)then x=369459;A=aW()return"source_of_magic precombat"end end;if B.BlackAttunement:IsCastable()and g:BuffDown(B.BlackAttunementBuff)then if o(B.BlackAttunement)then x=403264;return"black_attunement precombat"end end;if B.BronzeAttunement:IsCastable()and(g:BuffDown(B.BronzeAttunementBuff)and g:BuffUp(B.BlackAttunementBuff)and not g:BuffUp(B.BlackAttunementBuff,false))then if o(B.BronzeAttunement)then x=403265;return"bronze_attunement precombat"end end;if B.BlisteringScales:IsCastable()and b5()<10 then if o(B.BlisteringScales,nil,nil)then x=360827;A=b1()return"blistering_scales precombat 2"end end;if B.LivingFlame:IsCastable()then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame precombat 10"end end end;local function bm()if B.EbonMight:IsReady()then if o(B.EbonMight,nil)then x=395152;return"ebon_might ebon_logic 2"end end end;local function bn()if not ab then aa=w(aa,a9)end;aa=aa-1;if not ab then ab=true end;if C.NymuesUnravelingSpindle:IsEquippedAndReady()then aa=aa-2 end;if B.LivingFlame:IsReady()and(EnemiesCount8ySplash==1 or B.PupilofAlexstrasza:IsAvailable())then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame opener_filler 4"end end;if B.AzureStrike:IsCastable()then if o(B.AzureStrike,nil,nil,not h:IsSpellInRange(B.AzureStrike))then x=362969;return"azure_strike opener_filler 6"end end end;local function bo()if _.Commons.Enabled.TopTrinket or _.Commons.Enabled.BottomTrinket then if C.NymuesUnravelingSpindle:IsEquippedAndReady()and B.BreathofEons:CooldownRemains()<=3 then if C.NymuesUnravelingSpindle:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket NymuesUnravelingSpindle"elseif C.NymuesUnravelingSpindle:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket NymuesUnravelingSpindle"end end;if h:DebuffUp(B.TemporalWoundDebuff)or a5<=30 and g:BuffUp(B.EbonMightSelfBuff)then if C.IrideusFragment:IsEquippedAndReady()then if C.IrideusFragment:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket IrideusFragment"elseif C.IrideusFragment:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket IrideusFragment"end end;if C.AshesoftheEmbersoul:IsEquippedAndReady()then if C.AshesoftheEmbersoul:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket AshesoftheEmbersoul"elseif C.AshesoftheEmbersoul:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket AshesoftheEmbersoul"end end;if C.MirrorofFracturedTomorrows:IsEquippedAndReady()then if C.MirrorofFracturedTomorrows:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket MirrorofFracturedTomorrows"elseif C.MirrorofFracturedTomorrows:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket MirrorofFracturedTomorrows"end end;if C.BalefireBranch:IsEquippedAndReady()then if C.BalefireBranch:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket BalefireBranch"elseif C.BalefireBranch:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket BalefireBranch"end end end;if C.SpoilsofNeltharus:IsEquippedAndReady()and(g:BuffUp(B.SpoilsofNeltharusMastery)and(not((F:ID()==C.IrideusFragment:ID()or F:ID()==C.MirrorofFracturedTomorrows:ID())and F:CooldownUp()or(G:ID()==C.IrideusFragment:ID()or G:ID()==C.MirrorofFracturedTomorrows:ID())and G:CooldownUp())or not(d.CombatTime()%120<=20 or a5>=190 and a5<=250 and d.CombatTime()%60<=25 or a5<=25)))then if C.SpoilsofNeltharus:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket SpoilsofNeltharus"elseif C.SpoilsofNeltharus:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket SpoilsofNeltharus"end end;if C.BeacontotheBeyond:IsEquippedAndReady()and(h:DebuffDown(B.TemporalWoundDebuff)and((F:CooldownRemains()>=20 or not N)and(G:CooldownRemains()>=20 or not O))or N and O or a5<20)then if C.BeacontotheBeyond:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket BeacontotheBeyond"elseif C.BeacontotheBeyond:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket BeacontotheBeyond"end end;if C.BelorrelostheSuncaller:IsEquippedAndReady()and(h:DebuffDown(B.TemporalWoundDebuff)and((F:CooldownRemains()>=20 or not N)and(G:CooldownRemains()>=20 or not O))or N and O or a5<20)then if C.BelorrelostheSuncaller:ID()==TopTrinketID and _.Commons.Enabled.TopTrinket then x=13;return"top trinket BelorrelostheSuncaller"elseif C.BelorrelostheSuncaller:ID()==BotTrinketID and _.Commons.Enabled.BottomTrinket then x=14;return"bot trinket BelorrelostheSuncaller"end end;local bp=g:GetUseableTrinkets(D)if bp and n()and(h:DebuffDown(B.TemporalWoundDebuff)and(B.BreathofEons:CooldownRemains()>=30 or not O)and not P)then if bp then if l.Cast(bp,nil,nil)then if bp:ID()==GetInventoryItemID("player",13)and _.Commons.Enabled.TopTrinket then x=13;return"Generic use_items for "..bp:Name()elseif bp:ID()==GetInventoryItemID("player",14)and _.Commons.Enabled.BottomTrinket then x=14;return"Generic use_items for "..bp:Name()end end end end end end;local function bq()local br=ax.UnitDebuffCheck("Poison")if br~=0 then if B.Expunge:IsReady()then if o(B.Expunge,nil)then x=365585;A=br;return"Expunge Dispell "end end end end;local function bs()local br=ax.UnitDebuffCheckWith2Debuffz("Disease","Curse")if br~=0 then if B.CauterizingFlame:IsReady()then if o(B.CauterizingFlame,nil)then x=374251;A=br;return"Cauterizing Flame Dispell"end end end end;local function bt()if n()and B.TipTheScales:IsCastable()and(B.FireBreath:CooldownUp()and g:BuffUp(B.EbonMightSelfBuff))then if o(B.TipTheScales,nil)then x=370553;return"tip_the_scales fb 2"end end;local bu=0;if B.FireBreath:IsCastable()and B.FireBreath:CooldownUp()then if g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(1)and h:TimeToDie()>16 then bu=1 elseif g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(2)and h:TimeToDie()>12 then bu=2 elseif(g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(3)or g:BuffUp(B.TipTheScales)and not B.FontofMagic:IsAvailable())and h:TimeToDie()>8 then bu=3 end end;if not C.NeltharionsCalltoChaos:IsEquipped()then if g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(1)and h:TimeToDie()>16 then bu=1 elseif g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(2)and h:TimeToDie()>12 then bu=2 elseif(g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(3)or g:BuffUp(B.TipTheScales)and not B.FontofMagic:IsAvailable())and h:TimeToDie()>8 then bu=3 end end;if B.FontofMagic:IsAvailable()and(g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(4)or g:BuffUp(B.TipTheScales))and h:TimeToDie()>4 then bu=4 end;if bu>0 and B.FireBreath:IsCastable()then if q(B.FireBreath,false,bu,not h:IsInRange(25))then x=357208;z=bu;return"fire_breath empower_to="..bu.." fb 4"end end end;local function bv()if B.LivingFlame:IsReady()and((g:BuffUp(B.AncientFlameBuff)or g:Mana()>=200000 or not B.DreamofSpring:IsAvailable()or a8==0)and(EnemiesCount8ySplash==1 or B.PupilofAlexstrasza:IsAvailable()))then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame filler 2"end end;if B.AzureStrike:IsCastable()then if o(B.AzureStrike,nil,nil,not h:IsSpellInRange(B.AzureStrike))then x=362969;return"azure_strike filler 4"end end end;local function bw()ad=HeroRotationCharDB.Toggles[4]ae=HeroRotationCharDB.Toggles[5]af=not HeroRotationCharDB.Toggles[15]ah=HeroRotationCharDB.Toggles[192]ag=HeroRotationCharDB.Toggles[191]end;local function bx()Enemies25y=g:GetEnemiesInRange(25)Enemies8ySplash=h:GetEnemiesInSplashRange(8)if m()then EnemiesCount8ySplash=h:GetEnemiesInSplashRangeCount(8)else EnemiesCount8ySplash=1 end;if not ai then y=0;x=0 end;if y>0 then y=0 end;if x>0 then x=0 end;if z>0 then z=0 end;if A>0 then A=0 end;local aj=bw()if l.QueuedCast()then x=l.QueuedCast()return"Custom Queue "..j(x):ID()end;if ah and B.LandSlide:IsUsableP()and B.LandSlide:CooldownRemains(BypassRecovery)==0 then if l.Cast(B.LandSlide,nil,nil,nil)then x=358385;return"queue LandSlide"end elseif(not B.LandSlide:IsUsableP()or B.LandSlide:CooldownRemains()>0)and ah then HeroRotationCharDB.Toggles[192]=not HeroRotationCharDB.Toggles[192]l.Print("LandSlide Queue is now "..(HeroRotationCharDB.Toggles[192]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if B.RenewingBlaze:IsReady()and g:HealthPercentage()<=_.Augmentation.RBThreshold then if o(B.RenewingBlaze,nil)then x=374348;return"Selfheal Renewing Blaze"end end;if B.EmeraldBlossom:IsReady()and(ar or as or at or au or av)then if o(B.EmeraldBlossom,nil)then x=355913;A=aL(_.Augmentation.EBThreshold)return"emerald_blossom heal defensive"end end;if B.VerdantEmbrace:IsReady()and(ar or as or at or au or av)then if o(B.VerdantEmbrace,nil)then x=360995;A=aL(_.Augmentation.VEThreshold)return"verdant_embrace heal defensive"end end;if Z.TargetIsValid()or g:AffectingCombat()then a4=d.BossFightRemains()a5=a4;if a5==11111 then a5=d.FightRemains(Enemies25y,false)end;a6=g:GCD()+0.25 end;if Z.TargetIsValid()and(g:AffectingCombat()or ae)then if not g:AffectingCombat()and not g:IsCasting()then local aj=bl()if aj then return aj end end;local aj=Z.Interrupt(B.Quell,_.Commons.OffGCDasOffGCD.Quell,aX)if aj then return aj end;if B.Unravel:IsReady()then if o(B.Unravel,nil,nil,not h:IsSpellInRange(B.Unravel))then x=368432;return"unravel main 2"end end;VarTempWound=bd(Enemies25y)if B.Prescience:IsCastable()and b7()and((B.Prescience:FullRechargeTime()<=a6*3 or B.EbonMight:CooldownRemains()<=a6*3 and g:BuffRemains(B.EbonMightSelfBuff)-a6*3<=bi()*0.4 or VarTempWound>=a6+B.Eruption:CastTime()or a5<=30)and g:BuffStack(B.TremblingEarthBuff)+B.PrescienceBuff:AuraActiveCount()<=5+t(B.Prescience:FullRechargeTime()<=a6*3))then if o(B.Prescience,nil,nil)then x=409311;A=aQ()return"prescience main 4"end end;if g:BuffRemains(B.EbonMightSelfBuff)-B.EbonMight:CastTime()<=bi()*0.4 and(B.PrescienceBuff:AuraActiveCount()>=2 and d.CombatTime()<=10 or B.PrescienceBuff:AuraActiveCount()>=3 or ac or g:BuffRemains(B.EbonMightSelfBuff)>=B.EbonMight:CastTime()or bj()<=2)then local aj=bm()if aj then return aj end end;if aa>0 and d.CombatTime()<aa and not ac then local aj=bn()if aj then return aj end;if q(B.Pool,false,"WAIT")then return"Wait for OpenerFiller()"end end;if _.Commons.Enabled.Trinkets or _.Commons.Enabled.Items then local aj=bo()if aj then return aj end end;if B.DeepBreath:IsCastable()then if o(B.DeepBreath,nil,nil,not h:IsInRange(50))then x=357210;return"deep_breath main 8"end end;if B.TimeSkip:IsAvailable()and B.TimeSkip:CooldownUp()and not B.InterwovenThreads:IsAvailable()then local aj=bt()if aj then return aj end end;if B.Upheaval:IsCastable()and(g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(1)and B.TimeSkip:IsAvailable()and B.TimeSkip:CooldownUp()and not B.InterwovenThreads:IsAvailable())then if q(B.Upheaval,false,"1",not h:IsInRange(25),nil)then x=396286;if true then z=1 end;return"upheaval empower_to=1 main 10"end end;if n()and B.BreathofEons:IsCastable()and(B.BreathofEons:TimeSinceLastCast()>=117 or ac)and((B.EbonMight:CooldownRemains()<=4 or g:BuffUp(B.EbonMightSelfBuff))and h:TimeToDie()>15 and(not C.NymuesUnravelingSpindle:IsEquipped()or C.NymuesUnravelingSpindle:CooldownRemains()>=10 or a5<30 or H==C.NymuesUnravelingSpindle:ID()and X==2 or K==C.NymuesUnravelingSpindle:ID()and X==1)or a5<30)then if o(B.BreathofEons,nil,nil,not h:IsInRange(50))then x=403631;return"breath_of_eons main 12"end end;if B.LivingFlame:IsReady()and(g:BuffUp(B.LeapingFlamesBuff)and B.FireBreathDebuff:CooldownUp()and ac)then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame main 14"end end;if B.LivingFlame:IsReady()and(B.BreathofEons:CooldownUp()and h:TimeToDie()>15 and ac)then if o(B.LivingFlame,nil,nil,not h:IsSpellInRange(B.LivingFlame))then x=361469;return"living_flame main 15"end end;local aj=bt()if aj then return aj end;if B.Upheaval:IsCastable()and g:BuffRemains(B.EbonMightSelfBuff)>g:EmpowerCastTime(1)then if q(B.Upheaval,false,"1",not h:IsInRange(25),nil)then x=396286;if true then z=1 end;return"upheaval empower_to=1 main 16"end end;if n()and B.TimeSkip:IsCastable()and B.FireBreath:CooldownRemains()+B.Upheaval:CooldownRemains()+B.Prescience:FullRechargeTime()>35 then if o(B.TimeSkip,nil)then x=374968;return"time_skip main 18"end end;if B.EmeraldBlossom:IsReady()and(B.DreamofSpring:IsAvailable()and g:BuffUp(B.EssenceBurstBuff)and(a8==2 or a8==1 and g:BuffDown(B.AncientFlameBuff))and(g:BuffUp(B.EbonMightSelfBuff)or g:EssenceDeficit()==0 or g:BuffStack(B.EssenceBurstBuff)==a7 and B.EbonMight:CooldownRemains()>4))and(ar or as or at or au)then if o(B.EmeraldBlossom,nil)then x=355913;A=aL(_.Augmentation.EBThreshold)return"emerald_blossom main 20"end end;if B.Eruption:IsReady()and(g:BuffRemains(B.EbonMightSelfBuff)>B.Eruption:ExecuteTime()or g:EssenceDeficit()==0 or g:BuffStack(B.EssenceBurstBuff)==a7 and B.EbonMight:CooldownRemains()>4)then if o(B.Eruption,nil,nil,not h:IsInRange(25))then x=395160;return"eruption main 22"end end;if B.BlisteringScales:IsCastable()and(b5()==0 and g:BuffDown(B.EbonMightSelfBuff))then if o(B.BlisteringScales,nil,nil)then x=360827;A=b1()return"blistering_scales main 24"end end;if B.EmeraldBlossom:IsReady()and(g:BuffDown(B.EbonMightSelfBuff)and B.AncientFlame:IsAvailable()and B.ScarletAdaptation:IsAvailable()and not B.DreamofSpring:IsAvailable()and g:BuffDown(B.AncientFlameBuff)and EnemiesCount8ySplash==1)and(ar or as or at or au or av)then if o(B.EmeraldBlossom,nil)then x=355913;A=aL(_.Augmentation.EBThreshold)return"emerald_blossom main 26"end end;if B.VerdantEmbrace:IsReady()and(g:BuffDown(B.EbonMightSelfBuff)and B.AncientFlame:IsAvailable()and B.ScarletAdaptation:IsAvailable()and g:BuffDown(B.AncientFlameBuff)and(not B.DreamofSpring:IsAvailable()or g:Mana()>=200000)and EnemiesCount8ySplash==1)and(ar or as or at or au)then if o(B.VerdantEmbrace,nil)then x=360995;A=aL(_.Augmentation.VEThreshold)return"verdant_embrace main 28"end end;local aj=bv()if aj then return aj end;if q(B.Pool,false,"WAIT")then return"Wait/Pool"end end end;function ReturnSpell1()if x==0 then return 0 else return x end end;function ReturnSpell()if x==0 then return 0 else return x end end;function ReturnSpellMO()if y==0 then return 0 else return y end end;function ReturnSpellEP()if z==0 then return 0 else return z end end;function ReturnSpellT()if A==0 then return 0 else return A end end;local function by()B.PrescienceBuff:RegisterAuraTracking()l.Print("Augmentation Evoker rotation has been updated for patch 10.2.5.")end;l.SetAPL(1473,bx,by)